import{r as T,i as Z,P as pe,g as J,Z as Le,d as O,$ as fe,N as Ve,a2 as Oe,C as qe,h as re,j as P,o as x,w as d,G as $,U as se,f as e,l as I,e as S,t as V,a6 as he,c as K,b as i,m as _e,T as Te,F as me,a7 as Ee,a8 as ke,x as Ce,k as Be,s as W,a as o,_ as Ae,I as $e,H as Ue,p as ae,q as Ke}from"./D0_loxAU.js";import{_ as ze}from"./Mvjefoez.js";import{_ as je}from"./kecAHLyk.js";import{_ as He}from"./2t6NhyjD.js";import{_ as We}from"./CXcBp2lP.js";import{u as Xe,a as Ye}from"./DfhhxIwp.js";import{a as Y,c as Se,b as ve,V as Pe}from"./P7PFuRdT.js";import{r as Ge,P as Q}from"./oVxJKGu7.js";import{d as Ze,i as Me,u as ue,c as Je,e as Fe,o as Re,a as Qe}from"./B5rdlIOA.js";import{u as et}from"./BxGYdiRY.js";import"./BNf5BS2b.js";import"./CxRmHzWs.js";function ee(){let n=document.activeElement;if(n==null)return null;for(;n!=null&&n.shadowRoot!=null&&n.shadowRoot.activeElement!=null;)n=n.shadowRoot.activeElement;return n}function tt(n,a){const l=T(n);function t(v){return a[l.value][v]??l.value}return{state:l,dispatch:v=>{l.value=t(v)}}}function st(n,a){var C;const l=T({}),t=T("none"),w=T(n),v=n.value?"mounted":"unmounted";let c;const r=((C=a.value)==null?void 0:C.ownerDocument.defaultView)??Ze,{state:u,dispatch:g}=tt(v,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),b=y=>{var h;if(Me){const m=new CustomEvent(y,{bubbles:!1,cancelable:!1});(h=a.value)==null||h.dispatchEvent(m)}};Z(n,async(y,h)=>{var A;const m=h!==y;if(await Le(),m){const p=t.value,_=oe(a.value);y?(g("MOUNT"),b("enter"),_==="none"&&b("after-enter")):_==="none"||_==="undefined"||((A=l.value)==null?void 0:A.display)==="none"?(g("UNMOUNT"),b("leave"),b("after-leave")):h&&p!==_?(g("ANIMATION_OUT"),b("leave")):(g("UNMOUNT"),b("after-leave"))}},{immediate:!0});const f=y=>{const h=oe(a.value),m=h.includes(CSS.escape(y.animationName)),A=u.value==="mounted"?"enter":"leave";if(y.target===a.value&&m&&(b(`after-${A}`),g("ANIMATION_END"),!w.value)){const p=a.value.style.animationFillMode;a.value.style.animationFillMode="forwards",c=r==null?void 0:r.setTimeout(()=>{var _;((_=a.value)==null?void 0:_.style.animationFillMode)==="forwards"&&(a.value.style.animationFillMode=p)})}y.target===a.value&&h==="none"&&g("ANIMATION_END")},F=y=>{y.target===a.value&&(t.value=oe(a.value))},U=Z(a,(y,h)=>{y?(l.value=getComputedStyle(y),y.addEventListener("animationstart",F),y.addEventListener("animationcancel",f),y.addEventListener("animationend",f)):(g("ANIMATION_END"),c!==void 0&&(r==null||r.clearTimeout(c)),h==null||h.removeEventListener("animationstart",F),h==null||h.removeEventListener("animationcancel",f),h==null||h.removeEventListener("animationend",f))},{immediate:!0}),D=Z(u,()=>{const y=oe(a.value);t.value=u.value==="mounted"?y:"none"});return pe(()=>{U(),D()}),{isPresent:J(()=>["mounted","unmountSuspended"].includes(u.value))}}function oe(n){return n&&getComputedStyle(n).animationName||"none"}var at=O({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(n,{slots:a,expose:l}){var g;const{present:t,forceMount:w}=fe(n),v=T(),{isPresent:c}=st(t,v);l({present:c});let r=a.default({present:c.value});r=Ge(r||[]);const u=Ve();if(r&&(r==null?void 0:r.length)>1){const b=(g=u==null?void 0:u.parent)!=null&&g.type.name?`<${u.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${b}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(f=>`  - ${f}`).join(`
`)].join(`
`))}return()=>w.value||t.value||c.value?Oe(a.default({present:c.value})[0],{ref:b=>{const f=ue(b);return typeof(f==null?void 0:f.hasAttribute)>"u"||(f!=null&&f.hasAttribute("data-reka-popper-content-wrapper")?v.value=f.firstElementChild:v.value=f),f}}):null}});const ye=qe({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,originalBodyPointerEvents:void 0,branches:new Set});var ot=O({__name:"DismissableLayerBranch",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const a=n,{forwardRef:l,currentElement:t}=Y();return re(()=>{ye.branches.add(t.value)}),pe(()=>{ye.branches.delete(t.value)}),(w,v)=>(x(),P(e(Q),se({ref:e(l)},a),{default:d(()=>[$(w.$slots,"default")]),_:3},16))}}),nt=ot;function ie(n,{select:a=!1}={}){const l=ee();for(const t of n)if(it(t,{select:a}),ee()!==l)return!0}function rt(n){const a=[],l=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:t=>{const w=t.tagName==="INPUT"&&t.type==="hidden";return t.disabled||t.hidden||w?NodeFilter.FILTER_SKIP:t.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;l.nextNode();)a.push(l.currentNode);return a}function lt(n){return n instanceof HTMLInputElement&&"select"in n}function it(n,{select:a=!1}={}){if(n&&n.focus){const l=ee();n.focus({preventScroll:!0}),n!==l&&lt(n)&&a&&n.select()}}var ut=O({__name:"ToastAnnounceExclude",props:{altText:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){return(a,l)=>(x(),P(e(Q),{as:a.as,"as-child":a.asChild,"data-reka-toast-announce-exclude":"","data-reka-toast-announce-alt":a.altText||void 0},{default:d(()=>[$(a.$slots,"default")]),_:3},8,["as","as-child","data-reka-toast-announce-alt"]))}}),Ie=ut;const[le,dt]=Se("ToastProvider");var ct=O({inheritAttrs:!1,__name:"ToastProvider",props:{label:{type:String,required:!1,default:"Notification"},duration:{type:Number,required:!1,default:5e3},disableSwipe:{type:Boolean,required:!1},swipeDirection:{type:String,required:!1,default:"right"},swipeThreshold:{type:Number,required:!1,default:50}},setup(n){const a=n,{label:l,duration:t,disableSwipe:w,swipeDirection:v,swipeThreshold:c}=fe(a);ve({isProvider:!0});const r=T(),u=T(0),g=T(!1),b=T(!1);if(a.label&&typeof a.label=="string"&&!a.label.trim()){const f="Invalid prop `label` supplied to `ToastProvider`. Expected non-empty `string`.";throw new Error(f)}return dt({label:l,duration:t,disableSwipe:w,swipeDirection:v,swipeThreshold:c,toastCount:u,viewport:r,onViewportChange(f){r.value=f},onToastAdd(){u.value++},onToastRemove(){u.value--},isFocusedToastEscapeKeyDownRef:g,isClosePausedRef:b}),(f,F)=>$(f.$slots,"default")}}),pt=ct,ft=O({__name:"ToastAnnounce",setup(n){const a=le(),l=Je(1e3),t=T(!1);return Fe(()=>{t.value=!0}),(w,v)=>e(l)||t.value?(x(),P(e(Pe),{key:0},{default:d(()=>[S(V(e(a).label.value)+" ",1),$(w.$slots,"default")]),_:3})):I("v-if",!0)}}),mt=ft;const vt="toast.swipeStart",gt="toast.swipeMove",xt="toast.swipeCancel",yt="toast.swipeEnd",de="toast.viewportPause",ce="toast.viewportResume";function ne(n,a,l){const t=l.originalEvent.currentTarget,w=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:l});a&&t.addEventListener(n,a,{once:!0}),t.dispatchEvent(w)}function we(n,a,l=0){const t=Math.abs(n.x),w=Math.abs(n.y),v=t>w;return a==="left"||a==="right"?v&&t>l:!v&&w>l}function wt(n){return n.nodeType===n.ELEMENT_NODE}function De(n){const a=[];return Array.from(n.childNodes).forEach(t=>{if(t.nodeType===t.TEXT_NODE&&t.textContent&&a.push(t.textContent),wt(t)){const w=t.ariaHidden||t.hidden||t.style.display==="none",v=t.dataset.rekaToastAnnounceExclude==="";if(!w)if(v){const c=t.dataset.rekaToastAnnounceAlt;c&&a.push(c)}else a.push(...De(t))}}),a}const[bt,ht]=Se("ToastRoot");var _t=O({inheritAttrs:!1,__name:"ToastRootImpl",props:{type:{type:String,required:!1},open:{type:Boolean,required:!1,default:!1},duration:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"li"}},emits:["close","escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd"],setup(n,{emit:a}){const l=n,t=a,{forwardRef:w,currentElement:v}=Y(),{CollectionItem:c}=ve(),r=le(),u=T(null),g=T(null),b=J(()=>typeof l.duration=="number"?l.duration:r.duration.value),f=T(0),F=T(b.value),U=T(0),D=T(b.value),E=Fe(()=>{const m=new Date().getTime()-f.value;D.value=Math.max(F.value-m,0)},{fpsLimit:60});function C(m){m<=0||m===Number.POSITIVE_INFINITY||Me&&(window.clearTimeout(U.value),f.value=new Date().getTime(),U.value=window.setTimeout(y,m))}function y(m){var _,R;const A=(m==null?void 0:m.pointerType)==="";((_=v.value)==null?void 0:_.contains(ee()))&&A&&((R=r.viewport.value)==null||R.focus()),A&&(r.isClosePausedRef.value=!1),t("close")}const h=J(()=>v.value?De(v.value):null);if(l.type&&!["foreground","background"].includes(l.type)){const m="Invalid prop `type` supplied to `Toast`. Expected `foreground | background`.";throw new Error(m)}return he(m=>{const A=r.viewport.value;if(A){const p=()=>{C(F.value),E.resume(),t("resume")},_=()=>{const R=new Date().getTime()-f.value;F.value=F.value-R,window.clearTimeout(U.value),E.pause(),t("pause")};return A.addEventListener(de,_),A.addEventListener(ce,p),()=>{A.removeEventListener(de,_),A.removeEventListener(ce,p)}}}),Z(()=>[l.open,b.value],()=>{F.value=b.value,l.open&&!r.isClosePausedRef.value&&C(b.value)},{immediate:!0}),Re("Escape",m=>{t("escapeKeyDown",m),m.defaultPrevented||(r.isFocusedToastEscapeKeyDownRef.value=!0,y())}),re(()=>{r.onToastAdd()}),pe(()=>{r.onToastRemove()}),ht({onClose:y}),(m,A)=>(x(),K(me,null,[h.value?(x(),P(mt,{key:0,role:"alert","aria-live":m.type==="foreground"?"assertive":"polite","aria-atomic":"true"},{default:d(()=>[S(V(h.value),1)]),_:1},8,["aria-live"])):I("v-if",!0),e(r).viewport.value?(x(),P(Te,{key:1,to:e(r).viewport.value},[i(e(c),null,{default:d(()=>[i(e(Q),se({ref:e(w),role:"alert","aria-live":"off","aria-atomic":"true",tabindex:"0"},m.$attrs,{as:m.as,"as-child":m.asChild,"data-state":m.open?"open":"closed","data-swipe-direction":e(r).swipeDirection.value,style:e(r).disableSwipe.value?void 0:{userSelect:"none",touchAction:"none"},onPointerdown:A[0]||(A[0]=_e(p=>{e(r).disableSwipe.value||(u.value={x:p.clientX,y:p.clientY})},["left"])),onPointermove:A[1]||(A[1]=p=>{if(e(r).disableSwipe.value||!u.value)return;const _=p.clientX-u.value.x,R=p.clientY-u.value.y,q=!!g.value,j=["left","right"].includes(e(r).swipeDirection.value),B=["left","up"].includes(e(r).swipeDirection.value)?Math.min:Math.max,G=j?B(0,_):0,z=j?0:B(0,R),M=p.pointerType==="touch"?10:2,s={x:G,y:z},k={originalEvent:p,delta:s};q?(g.value=s,e(ne)(e(gt),N=>t("swipeMove",N),k)):e(we)(s,e(r).swipeDirection.value,M)?(g.value=s,e(ne)(e(vt),N=>t("swipeStart",N),k),p.target.setPointerCapture(p.pointerId)):(Math.abs(_)>M||Math.abs(R)>M)&&(u.value=null)}),onPointerup:A[2]||(A[2]=p=>{if(e(r).disableSwipe.value)return;const _=g.value,R=p.target;if(R.hasPointerCapture(p.pointerId)&&R.releasePointerCapture(p.pointerId),g.value=null,u.value=null,_){const q=p.currentTarget,j={originalEvent:p,delta:_};e(we)(_,e(r).swipeDirection.value,e(r).swipeThreshold.value)?e(ne)(e(yt),B=>t("swipeEnd",B),j):e(ne)(e(xt),B=>t("swipeCancel",B),j),q==null||q.addEventListener("click",B=>B.preventDefault(),{once:!0})}})}),{default:d(()=>[$(m.$slots,"default",{remaining:D.value,duration:b.value})]),_:3},16,["as","as-child","data-state","data-swipe-direction","style"])]),_:3})],8,["to"])):I("v-if",!0)],64))}}),Tt=_t,Et=O({__name:"ToastClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const a=n,l=bt(),{forwardRef:t}=Y();return(w,v)=>(x(),P(Ie,{"as-child":""},{default:d(()=>[i(e(Q),se(a,{ref:e(t),type:w.as==="button"?"button":void 0,onClick:e(l).onClose}),{default:d(()=>[$(w.$slots,"default")]),_:3},16,["type","onClick"])]),_:3}))}}),Ne=Et,kt=O({__name:"ToastAction",props:{altText:{type:String,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){if(!n.altText)throw new Error("Missing prop `altText` expected on `ToastAction`");const{forwardRef:l}=Y();return(t,w)=>t.altText?(x(),P(Ie,{key:0,"alt-text":t.altText,"as-child":""},{default:d(()=>[i(Ne,{ref:e(l),as:t.as,"as-child":t.asChild},{default:d(()=>[$(t.$slots,"default")]),_:3},8,["as","as-child"])]),_:3},8,["alt-text"])):I("v-if",!0)}}),Ct=kt,At=O({__name:"ToastDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const a=n;return Y(),(l,t)=>(x(),P(e(Q),Ee(ke(a)),{default:d(()=>[$(l.$slots,"default")]),_:3},16))}}),St=At,Pt=O({__name:"ToastRoot",props:{defaultOpen:{type:Boolean,required:!1,default:!0},forceMount:{type:Boolean,required:!1},type:{type:String,required:!1,default:"foreground"},open:{type:Boolean,required:!1,default:void 0},duration:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"li"}},emits:["escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd","update:open"],setup(n,{emit:a}){const l=n,t=a,{forwardRef:w}=Y(),v=Qe(l,"open",t,{defaultValue:l.defaultOpen,passive:l.open===void 0});return(c,r)=>(x(),P(e(at),{present:c.forceMount||e(v)},{default:d(()=>[i(Tt,se({ref:e(w),open:e(v),type:c.type,as:c.as,"as-child":c.asChild,duration:c.duration},c.$attrs,{onClose:r[0]||(r[0]=u=>v.value=!1),onPause:r[1]||(r[1]=u=>t("pause")),onResume:r[2]||(r[2]=u=>t("resume")),onEscapeKeyDown:r[3]||(r[3]=u=>t("escapeKeyDown",u)),onSwipeStart:r[4]||(r[4]=u=>{t("swipeStart",u),u.defaultPrevented||u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:r[5]||(r[5]=u=>{if(t("swipeMove",u),!u.defaultPrevented){const{x:g,y:b}=u.detail.delta,f=u.currentTarget;f.setAttribute("data-swipe","move"),f.style.setProperty("--reka-toast-swipe-move-x",`${g}px`),f.style.setProperty("--reka-toast-swipe-move-y",`${b}px`)}}),onSwipeCancel:r[6]||(r[6]=u=>{if(t("swipeCancel",u),!u.defaultPrevented){const g=u.currentTarget;g.setAttribute("data-swipe","cancel"),g.style.removeProperty("--reka-toast-swipe-move-x"),g.style.removeProperty("--reka-toast-swipe-move-y"),g.style.removeProperty("--reka-toast-swipe-end-x"),g.style.removeProperty("--reka-toast-swipe-end-y")}}),onSwipeEnd:r[7]||(r[7]=u=>{if(t("swipeEnd",u),!u.defaultPrevented){const{x:g,y:b}=u.detail.delta,f=u.currentTarget;f.setAttribute("data-swipe","end"),f.style.removeProperty("--reka-toast-swipe-move-x"),f.style.removeProperty("--reka-toast-swipe-move-y"),f.style.setProperty("--reka-toast-swipe-end-x",`${g}px`),f.style.setProperty("--reka-toast-swipe-end-y",`${b}px`),v.value=!1}})}),{default:d(({remaining:u,duration:g})=>[$(c.$slots,"default",{remaining:u,duration:g,open:e(v)})]),_:3},16,["open","type","as","as-child","duration"])]),_:3},8,["present"]))}}),Mt=Pt,Ft=O({__name:"ToastTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const a=n;return Y(),(l,t)=>(x(),P(e(Q),Ee(ke(a)),{default:d(()=>[$(l.$slots,"default")]),_:3},16))}}),Rt=Ft,It=O({__name:"FocusProxy",emits:["focusFromOutsideViewport"],setup(n,{emit:a}){const l=a,t=le();return(w,v)=>(x(),P(e(Pe),{"aria-hidden":"true",tabindex:"0",style:{position:"fixed"},onFocus:v[0]||(v[0]=c=>{var g;const r=c.relatedTarget;!((g=e(t).viewport.value)!=null&&g.contains(r))&&l("focusFromOutsideViewport")})},{default:d(()=>[$(w.$slots,"default")]),_:3}))}}),be=It,Dt=O({inheritAttrs:!1,__name:"ToastViewport",props:{hotkey:{type:Array,required:!1,default:()=>["F8"]},label:{type:[String,Function],required:!1,default:"Notifications ({hotkey})"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"ol"}},setup(n){const a=n,{hotkey:l,label:t}=fe(a),{forwardRef:w,currentElement:v}=Y(),{CollectionSlot:c,getItems:r}=ve(),u=le(),g=J(()=>u.toastCount.value>0),b=T(),f=T(),F=J(()=>l.value.join("+").replace(/Key/g,"").replace(/Digit/g,""));Re(l.value,()=>{v.value.focus()}),re(()=>{u.onViewportChange(v.value)}),he(D=>{const E=v.value;if(g.value&&E){const C=()=>{if(!u.isClosePausedRef.value){const p=new CustomEvent(de);E.dispatchEvent(p),u.isClosePausedRef.value=!0}},y=()=>{if(u.isClosePausedRef.value){const p=new CustomEvent(ce);E.dispatchEvent(p),u.isClosePausedRef.value=!1}},h=p=>{!E.contains(p.relatedTarget)&&y()},m=()=>{E.contains(ee())||y()},A=p=>{var q,j,B;const _=p.altKey||p.ctrlKey||p.metaKey;if(p.key==="Tab"&&!_){const G=ee(),z=p.shiftKey;if(p.target===E&&z){(q=b.value)==null||q.focus();return}const k=U({tabbingDirection:z?"backwards":"forwards"}),N=k.findIndex(X=>X===G);ie(k.slice(N+1))?p.preventDefault():z?(j=b.value)==null||j.focus():(B=f.value)==null||B.focus()}};E.addEventListener("focusin",C),E.addEventListener("focusout",h),E.addEventListener("pointermove",C),E.addEventListener("pointerleave",m),E.addEventListener("keydown",A),window.addEventListener("blur",C),window.addEventListener("focus",y),D(()=>{E.removeEventListener("focusin",C),E.removeEventListener("focusout",h),E.removeEventListener("pointermove",C),E.removeEventListener("pointerleave",m),E.removeEventListener("keydown",A),window.removeEventListener("blur",C),window.removeEventListener("focus",y)})}});function U({tabbingDirection:D}){const C=r().map(y=>y.ref).map(y=>{const h=[y,...rt(y)];return D==="forwards"?h:h.reverse()});return(D==="forwards"?C.reverse():C).flat()}return(D,E)=>(x(),P(e(nt),{role:"region","aria-label":typeof e(t)=="string"?e(t).replace("{hotkey}",F.value):e(t)(F.value),tabindex:"-1",style:Ce({pointerEvents:g.value?void 0:"none"})},{default:d(()=>[g.value?(x(),P(be,{key:0,ref:C=>{b.value=e(ue)(C)},onFocusFromOutsideViewport:E[0]||(E[0]=()=>{const C=U({tabbingDirection:"forwards"});e(ie)(C)})},null,512)):I("v-if",!0),i(e(c),null,{default:d(()=>[i(e(Q),se({ref:e(w),tabindex:"-1",as:D.as,"as-child":D.asChild},D.$attrs),{default:d(()=>[$(D.$slots,"default")]),_:3},16,["as","as-child"])]),_:3}),g.value?(x(),P(be,{key:1,ref:C=>{f.value=e(ue)(C)},onFocusFromOutsideViewport:E[1]||(E[1]=()=>{const C=U({tabbingDirection:"backwards"});e(ie)(C)})},null,512)):I("v-if",!0)]),_:3},8,["aria-label","style"]))}}),Nt=Dt;const Lt={class:"grid gap-1"},Vt=["onClick"],Ot=O({__name:"Toaster",setup(n){const{toasts:a}=et(),l=t=>{switch(t){case"destructive":return"group destructive border-destructive bg-destructive text-destructive-foreground";case"success":return"group success border-green-500 bg-green-50 text-green-900 dark:bg-green-900 dark:text-green-100";case"warning":return"group warning border-yellow-500 bg-yellow-50 text-yellow-900 dark:bg-yellow-900 dark:text-yellow-100";case"info":return"group info border-blue-500 bg-blue-50 text-blue-900 dark:bg-blue-900 dark:text-blue-100";default:return"group border bg-background text-foreground"}};return(t,w)=>{const v=Ae;return x(),P(e(pt),null,{default:d(()=>[(x(!0),K(me,null,Be(e(a),c=>(x(),P(e(Mt),{key:c.id,open:c.open,"onUpdate:open":r=>c.open=r,duration:c.duration,class:W(["pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--reka-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--reka-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",l(c.variant)])},{default:d(()=>[o("div",Lt,[c.title?(x(),P(e(Rt),{key:0,class:"text-sm font-semibold"},{default:d(()=>[S(V(c.title),1)]),_:2},1024)):I("",!0),c.description?(x(),P(e(St),{key:1,class:"text-sm opacity-90"},{default:d(()=>[S(V(c.description),1)]),_:2},1024)):I("",!0)]),c.action?(x(),P(e(Ct),{key:0,"alt-text":c.action.altText,"as-child":""},{default:d(()=>[o("button",{onClick:c.action.onClick,class:"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive"},V(c.action.label),9,Vt)]),_:2},1032,["alt-text"])):I("",!0),i(e(Ne),{class:"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600"},{default:d(()=>[i(v,{name:"lucide:x",class:"h-4 w-4"})]),_:1})]),_:2},1032,["open","onUpdate:open","duration","class"]))),128)),i(e(Nt),{class:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]"})]),_:1})}}}),qt={class:"min-h-screen bg-background font-sans antialiased text-foreground flex"},Bt={class:"h-14 flex items-center px-6 border-b"},$t={class:"flex items-center gap-2 font-semibold text-lg",href:"/"},Ut={class:"bg-blue-600 text-white p-1.5 rounded"},Kt={class:"flex-1 py-4 px-3 space-y-1 overflow-auto min-h-0"},zt={class:"space-y-1"},jt={key:0},Ht={class:"space-y-1"},Wt={class:"p-3 border-t"},Xt={class:"flex items-center gap-3 mb-3"},Yt={class:"h-8 w-8 rounded-full bg-gradient-to-br from-primary to-primary/60 flex items-center justify-center text-primary-foreground font-bold text-sm"},Gt={class:"flex-1 min-w-0"},Zt={class:"text-sm font-medium truncate"},Jt={class:"text-xs text-muted-foreground"},Qt={key:0,class:"p-3 border-t"},es={class:"flex items-center justify-between mb-2"},ts={class:"flex items-center gap-2"},ss={class:"text-xs text-muted-foreground"},as={class:"flex items-baseline gap-1.5 mb-2"},os={class:"text-sm font-bold"},ns={class:"text-xs text-muted-foreground"},rs={class:"w-full bg-muted rounded-full h-1.5 overflow-hidden"},ls={class:"flex-1 flex flex-col min-w-0"},is={class:"h-14 border-b bg-background/95 backdrop-blur flex items-center justify-between px-4 md:px-6 sticky top-0 z-10"},us={class:"flex items-center gap-4"},ds={class:"font-semibold text-xl tracking-tight text-foreground"},cs={class:"flex items-center gap-2"},ps={class:"relative hidden sm:block"},fs={class:"flex-1 overflow-auto bg-muted/10 p-4 md:p-6"},ms={class:"bg-card rounded-lg shadow-lg w-full max-w-md p-6 m-4"},vs={key:0,class:"space-y-4"},gs={class:"space-y-2"},xs={class:"space-y-2"},ys={class:"flex gap-2"},ws={key:1,class:"space-y-4"},bs={class:"flex gap-2"},hs={key:2,class:"text-center space-y-4"},_s={class:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center mx-auto"},Ts={key:3,class:"text-center space-y-4"},Es={class:"h-12 w-12 rounded-full bg-red-100 flex items-center justify-center mx-auto"},ks={class:"font-medium text-destructive"},Os=O({__name:"default",setup(n){const a=$e(),{user:l,isAdmin:t,logout:w}=Ue(),v=async()=>{try{await w()}catch(M){console.error("Logout failed:",M)}},{accounts:c,isAddingAccount:r,fetchAccounts:u,getAuthUrl:g,addAccount:b}=Xe(),{fetchFiles:f}=Ye(),F=T(null),U=T(!1);T(!1);const D=async()=>{U.value=!0;try{const M=await $fetch("/api/dropbox/storage-all");F.value=M}catch(M){console.error("Error fetching storage:",M),F.value=null}finally{U.value=!1}},E=J(()=>!F.value||F.value.totalAllocated===0?0:F.value.totalUsed/F.value.totalAllocated*100),C=M=>{if(M===0)return"0 B";const s=1024,k=["B","KB","MB","GB","TB"],N=Math.floor(Math.log(M)/Math.log(s));return parseFloat((M/Math.pow(s,N)).toFixed(1))+" "+k[N]};re(()=>{Z(t,M=>{M&&(u(),D())},{immediate:!0})}),Z(c,()=>{t.value&&D()},{deep:!0});const y=Ke();J(()=>!!y.public.dropboxAppKey);const h=T(!1),m=T("credentials"),A=T(""),p=T(""),_=T(""),R=T(""),q=T(""),j=()=>{const M=p.value||y.public.dropboxAppKey;window.open(g(M),"_blank","width=600,height=800")},B=async()=>{const M=await b(R.value,p.value,_.value,q.value||void 0);M.success?(m.value="success",await u(),await D(),await f("")):(A.value=M.error||"Failed to add account",m.value="error")},G=()=>{h.value=!1,m.value="credentials",p.value="",_.value="",R.value="",q.value=""};T(!1);const z=T(!1);return Z(()=>a.path,()=>{z.value=!1}),(M,s)=>{const k=Ae,N=ze,X=je,H=He,te=We;return x(),K("div",qt,[e(z)?(x(),K("div",{key:0,class:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm",onClick:s[0]||(s[0]=L=>z.value=!1)})):I("",!0),o("aside",{class:W(["fixed inset-y-0 left-0 z-50 w-64 border-r bg-card flex flex-col h-screen transition-transform duration-300 md:translate-x-0 md:sticky md:top-0 overflow-hidden shadow-xl md:shadow-none",e(z)?"translate-x-0":"-translate-x-full"])},[o("div",Bt,[o("a",$t,[o("div",Ut,[i(k,{name:"lucide:hard-drive",class:"h-4 w-4"})]),s[9]||(s[9]=o("span",null,"MultiBox",-1))])]),o("div",Kt,[s[21]||(s[21]=o("div",{class:"px-2 mb-2 text-xs font-semibold text-muted-foreground tracking-wider uppercase"},"Menu",-1)),i(X,null,{fallback:d(()=>[...s[17]||(s[17]=[o("nav",{class:"space-y-1"},[o("div",{class:"flex items-center gap-3 px-3 py-2 rounded-md"},[o("div",{class:"h-4 w-4 bg-muted rounded animate-pulse"}),o("div",{class:"h-4 w-20 bg-muted rounded animate-pulse"})]),o("div",{class:"flex items-center gap-3 px-3 py-2 rounded-md"},[o("div",{class:"h-4 w-4 bg-muted rounded animate-pulse"}),o("div",{class:"h-4 w-24 bg-muted rounded animate-pulse"})])],-1)])]),default:d(()=>[o("nav",zt,[e(t)?(x(),P(N,{key:0,to:"/drive",class:W(["flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md transition-colors",e(a).path==="/drive"?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"])},{default:d(()=>[i(k,{name:"lucide:layout-dashboard",class:"h-4 w-4"}),s[10]||(s[10]=S(" Dashboard ",-1))]),_:1},8,["class"])):I("",!0),e(t)?I("",!0):(x(),P(N,{key:1,to:"/drive",class:W(["flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md transition-colors",e(a).path.startsWith("/drive")?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"])},{default:d(()=>[i(k,{name:"lucide:folder",class:"h-4 w-4"}),s[11]||(s[11]=S(" My Files ",-1))]),_:1},8,["class"])),e(t)?(x(),K(me,{key:2},[s[16]||(s[16]=o("div",{class:"px-2 mt-4 mb-2 text-xs font-semibold text-muted-foreground tracking-wider uppercase"},"Storage",-1)),i(N,{to:"/admin/files",class:W(["flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md transition-colors",e(a).path==="/admin/files"?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"])},{default:d(()=>[i(k,{name:"lucide:hard-drive",class:"h-4 w-4"}),s[12]||(s[12]=S(" File Manager ",-1))]),_:1},8,["class"]),i(N,{to:"/admin/split",class:W(["flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md transition-colors",e(a).path==="/admin/split"?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"])},{default:d(()=>[i(k,{name:"lucide:columns",class:"h-4 w-4"}),s[13]||(s[13]=S(" Split View ",-1))]),_:1},8,["class"]),i(N,{to:"/admin/shares",class:W(["flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md transition-colors",e(a).path==="/admin/shares"?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"])},{default:d(()=>[i(k,{name:"lucide:link-2",class:"h-4 w-4"}),s[14]||(s[14]=S(" Shared Links ",-1))]),_:1},8,["class"]),i(N,{to:"/admin/trash",class:W(["flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md transition-colors",e(a).path==="/admin/trash"?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"])},{default:d(()=>[i(k,{name:"lucide:trash-2",class:"h-4 w-4"}),s[15]||(s[15]=S(" Trash ",-1))]),_:1},8,["class"])],64)):I("",!0)])]),_:1}),i(X,null,{default:d(()=>[e(t)?(x(),K("div",jt,[s[20]||(s[20]=o("div",{class:"px-2 mt-4 mb-2 text-xs font-semibold text-muted-foreground tracking-wider uppercase"},"Management",-1)),o("nav",Ht,[i(N,{to:"/admin/users",class:W(["flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md transition-colors",e(a).path==="/admin/users"?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"])},{default:d(()=>[i(k,{name:"lucide:users",class:"h-4 w-4"}),s[18]||(s[18]=S(" Users ",-1))]),_:1},8,["class"]),i(N,{to:"/admin/accounts",class:W(["flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md transition-colors",e(a).path==="/admin/accounts"?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"])},{default:d(()=>[i(k,{name:"lucide:settings",class:"h-4 w-4"}),s[19]||(s[19]=S(" Accounts ",-1))]),_:1},8,["class"])])])):I("",!0)]),_:1})]),o("div",Wt,[i(X,null,{fallback:d(()=>[...s[22]||(s[22]=[o("div",{class:"flex items-center gap-3 mb-3"},[o("div",{class:"h-8 w-8 rounded-full bg-muted animate-pulse"}),o("div",{class:"flex-1 min-w-0"},[o("div",{class:"h-4 w-24 bg-muted rounded animate-pulse mb-1"}),o("div",{class:"h-3 w-16 bg-muted rounded animate-pulse"})])],-1)])]),default:d(()=>{var L,ge,xe;return[o("div",Xt,[o("div",Yt,V(((ge=(L=e(l))==null?void 0:L.email)==null?void 0:ge.charAt(0).toUpperCase())||"U"),1),o("div",Gt,[o("p",Zt,V(((xe=e(l))==null?void 0:xe.email)||"User"),1),o("p",Jt,V(e(t)?"Administrator":"User"),1)])])]}),_:1}),i(H,{variant:"outline",size:"sm",class:"w-full text-xs h-8",onClick:v},{default:d(()=>[i(k,{name:"lucide:log-out",class:"h-3.5 w-3.5 mr-2"}),s[23]||(s[23]=S(" Logout ",-1))]),_:1})]),i(X,null,{default:d(()=>[e(t)&&e(F)?(x(),K("div",Qt,[o("div",es,[o("div",ts,[i(k,{name:"lucide:database",class:"h-4 w-4 text-primary"}),s[24]||(s[24]=o("span",{class:"text-xs font-semibold uppercase tracking-wider"},"Storage",-1))]),o("span",ss,V(e(E).toFixed(0))+"%",1)]),o("div",as,[o("span",os,V(C(e(F).totalUsed)),1),o("span",ns,"of "+V(C(e(F).totalAllocated)),1)]),o("div",rs,[o("div",{class:"h-full rounded-full bg-[#0061FE]",style:Ce({width:e(E)+"%"})},null,4)])])):I("",!0)]),_:1})],2),o("div",ls,[o("header",is,[o("div",us,[i(H,{variant:"ghost",size:"icon",class:"md:hidden -ml-2",onClick:s[1]||(s[1]=L=>z.value=!0)},{default:d(()=>[i(k,{name:"lucide:menu",class:"h-5 w-5"})]),_:1}),o("h1",ds,[i(X,null,{fallback:d(()=>[...s[25]||(s[25]=[S("Files",-1)])]),default:d(()=>[S(V(e(t)?"File Explorer":"My Files")+" ",1)]),_:1})]),i(X,null,{default:d(()=>[e(t)&&e(c).length>0?(x(),P(N,{key:0,to:"/admin/accounts",class:"hidden md:flex items-center h-7 px-3 rounded-full bg-primary/10 text-primary border border-primary/20 text-xs font-medium shadow-sm hover:bg-primary/20 transition-colors"},{default:d(()=>[i(k,{name:"lucide:hard-drive",class:"h-3 w-3 mr-1.5"}),o("span",null,V(e(c).length)+" Account"+V(e(c).length>1?"s":""),1)]),_:1})):I("",!0)]),_:1})]),o("div",cs,[o("div",ps,[i(k,{name:"lucide:search",class:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),i(te,{placeholder:"Search files...",class:"w-64 pl-9 h-9 bg-muted/30 border-none focus-visible:bg-background focus-visible:ring-1"})]),i(H,{variant:"ghost",size:"icon",class:"rounded-full"},{default:d(()=>[i(k,{name:"lucide:bell",class:"h-5 w-5"})]),_:1})])]),o("main",fs,[$(M.$slots,"default")])]),(x(),P(Te,{to:"body"},[e(h)?(x(),K("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:_e(G,["self"])},[o("div",ms,[s[39]||(s[39]=o("h2",{class:"text-lg font-semibold mb-4"},"Add Dropbox Account",-1)),e(m)==="credentials"?(x(),K("div",vs,[s[30]||(s[30]=o("p",{class:"text-sm text-muted-foreground"},[S(" Enter your Dropbox App credentials. Get them from "),o("a",{href:"https://www.dropbox.com/developers/apps",target:"_blank",class:"text-primary underline"},"Dropbox App Console"),S(". ")],-1)),o("div",gs,[s[26]||(s[26]=o("label",{class:"text-sm font-medium"},"App Key",-1)),i(te,{modelValue:e(p),"onUpdate:modelValue":s[2]||(s[2]=L=>ae(p)?p.value=L:null),placeholder:"e.g. szgdfklmefwr8nr",class:"font-mono text-sm"},null,8,["modelValue"])]),o("div",xs,[s[27]||(s[27]=o("label",{class:"text-sm font-medium"},"App Secret",-1)),i(te,{modelValue:e(_),"onUpdate:modelValue":s[3]||(s[3]=L=>ae(_)?_.value=L:null),placeholder:"e.g. fjcbzjokakc65qs",type:"password",class:"font-mono text-sm"},null,8,["modelValue"])]),o("div",ys,[i(H,{variant:"outline",class:"flex-1",onClick:G},{default:d(()=>[...s[28]||(s[28]=[S(" Cancel ",-1)])]),_:1}),i(H,{class:"flex-1",disabled:!e(p)||!e(_),onClick:s[4]||(s[4]=L=>m.value="auth")},{default:d(()=>[s[29]||(s[29]=S(" Next ",-1)),i(k,{name:"lucide:arrow-right",class:"ml-2 h-4 w-4"})]),_:1},8,["disabled"])])])):e(m)==="auth"?(x(),K("div",ws,[s[34]||(s[34]=o("p",{class:"text-sm text-muted-foreground"}," Click the button below to authorize. After authorizing, copy the code and paste it here. ",-1)),i(H,{class:"w-full",onClick:j},{default:d(()=>[i(k,{name:"logos:dropbox",class:"mr-2 h-4 w-4"}),s[31]||(s[31]=S(" Authorize with Dropbox ",-1))]),_:1}),s[35]||(s[35]=o("div",{class:"relative"},[o("div",{class:"absolute inset-0 flex items-center"},[o("span",{class:"w-full border-t"})]),o("div",{class:"relative flex justify-center text-xs uppercase"},[o("span",{class:"bg-card px-2 text-muted-foreground"},"Then paste code below")])],-1)),i(te,{modelValue:e(R),"onUpdate:modelValue":s[5]||(s[5]=L=>ae(R)?R.value=L:null),placeholder:"Paste authorization code here...",class:"font-mono text-sm"},null,8,["modelValue"]),i(te,{modelValue:e(q),"onUpdate:modelValue":s[6]||(s[6]=L=>ae(q)?q.value=L:null),placeholder:"Account name (optional)"},null,8,["modelValue"]),o("div",bs,[i(H,{variant:"outline",class:"flex-1",onClick:s[7]||(s[7]=L=>m.value="credentials")},{default:d(()=>[i(k,{name:"lucide:arrow-left",class:"mr-2 h-4 w-4"}),s[32]||(s[32]=S(" Back ",-1))]),_:1}),i(H,{class:"flex-1",disabled:!e(R)||e(r),onClick:B},{default:d(()=>[e(r)?(x(),P(k,{key:0,name:"lucide:loader-2",class:"mr-2 h-4 w-4 animate-spin"})):I("",!0),s[33]||(s[33]=S(" Add Account ",-1))]),_:1},8,["disabled"])])])):e(m)==="success"?(x(),K("div",hs,[o("div",_s,[i(k,{name:"lucide:check",class:"h-6 w-6 text-green-600"})]),s[37]||(s[37]=o("p",{class:"font-medium"},"Account added successfully!",-1)),i(H,{class:"w-full",onClick:G},{default:d(()=>[...s[36]||(s[36]=[S(" Done ",-1)])]),_:1})])):e(m)==="error"?(x(),K("div",Ts,[o("div",Es,[i(k,{name:"lucide:x",class:"h-6 w-6 text-red-600"})]),o("p",ks,V(e(A)),1),i(H,{class:"w-full",onClick:s[8]||(s[8]=L=>m.value="auth")},{default:d(()=>[...s[38]||(s[38]=[S(" Try Again ",-1)])]),_:1})])):I("",!0)])])):I("",!0)])),i(e(Ot))])}}});export{Os as default};
