var Mt=Object.defineProperty;var jt=(l,a,r)=>a in l?Mt(l,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[a]=r;var le=(l,a,r)=>jt(l,typeof a!="symbol"?a+"":a,r);import{J as Ot,K as ye,r as D,L as It,M as Ut,N as Rt,O as Nt,P as bt,i as vt,Q as mt,R as Vt,S as Ht,f as s,d as he,c as x,o as u,U as qt,g as se,V as ge,C as Kt,W as Wt,B as we,h as Gt,a as t,t as S,b as w,_ as Ee,F as Se,k as Fe,j as A,l as L,s as X,m as q,e as ee,X as Jt,w as Ve,z as He,T as De,x as Qt,n as Xt,v as Yt,D as Zt,p as es}from"./D0_loxAU.js";import{c as ts}from"./BNf5BS2b.js";import{u as Ae}from"./BxGYdiRY.js";const ss=l=>l==="defer"||l===!1;function rs(...l){var U;const a=typeof l[l.length-1]=="string"?l.pop():void 0;typeof l[0]!="string"&&l.unshift(a);let[r,o,e={}]=l;if(typeof r!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof o!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const i=Ot(),d=o,g=()=>ye.value,m=()=>i.isHydrating?i.payload.data[r]:i.static.data[r];e.server=e.server??!0,e.default=e.default??g,e.getCachedData=e.getCachedData??m,e.lazy=e.lazy??!1,e.immediate=e.immediate??!0,e.deep=e.deep??ye.deep,e.dedupe=e.dedupe??"cancel";const h=e.getCachedData(r,i),C=h!=null;if(!i._asyncData[r]||!e.immediate){(U=i.payload._errors)[r]??(U[r]=ye.errorValue);const B=e.deep?D:It;i._asyncData[r]={data:B(C?h:e.default()),pending:D(!C),error:Ut(i.payload._errors,r),status:D("idle"),_default:e.default}}const k={...i._asyncData[r]};delete k._default,k.refresh=k.execute=(B={})=>{if(i._asyncDataPromises[r]){if(ss(B.dedupe??e.dedupe))return i._asyncDataPromises[r];i._asyncDataPromises[r].cancelled=!0}if(B._initial||i.isHydrating&&B._initial!==!1){const v=B._initial?h:e.getCachedData(r,i);if(v!=null)return Promise.resolve(v)}k.pending.value=!0,k.status.value="pending";const j=new Promise((v,b)=>{try{v(d(i))}catch(F){b(F)}}).then(async v=>{if(j.cancelled)return i._asyncDataPromises[r];let b=v;e.transform&&(b=await e.transform(v)),e.pick&&(b=ns(b,e.pick)),i.payload.data[r]=b,k.data.value=b,k.error.value=ye.errorValue,k.status.value="success"}).catch(v=>{if(j.cancelled)return i._asyncDataPromises[r];k.error.value=Ht(v),k.data.value=s(e.default()),k.status.value="error"}).finally(()=>{j.cancelled||(k.pending.value=!1,delete i._asyncDataPromises[r])});return i._asyncDataPromises[r]=j,i._asyncDataPromises[r]},k.clear=()=>os(i,r);const z=()=>k.refresh({_initial:!0}),T=e.server!==!1&&i.payload.serverRendered;{const B=Rt();if(B&&T&&e.immediate&&!B.sp&&(B.sp=[]),B&&!B._nuxtOnBeforeMountCbs){B._nuxtOnBeforeMountCbs=[];const b=B._nuxtOnBeforeMountCbs;Nt(()=>{b.forEach(F=>{F()}),b.splice(0,b.length)}),bt(()=>b.splice(0,b.length))}T&&i.isHydrating&&(k.error.value||h!=null)?(k.pending.value=!1,k.status.value=k.error.value?"error":"success"):B&&(i.payload.serverRendered&&i.isHydrating||e.lazy)&&e.immediate?B._nuxtOnBeforeMountCbs.push(z):e.immediate&&z();const j=Vt();if(e.watch){const b=vt(e.watch,()=>k.refresh());j&&mt(b)}const v=i.hook("app:data:refresh",async b=>{(!b||b.includes(r))&&await k.refresh()});j&&mt(v)}const O=Promise.resolve(i._asyncDataPromises[r]).then(()=>k);return Object.assign(O,k),O}function os(l,a){a in l.payload.data&&(l.payload.data[a]=void 0),a in l.payload._errors&&(l.payload._errors[a]=ye.errorValue),l._asyncData[a]&&(l._asyncData[a].data.value=void 0,l._asyncData[a].error.value=ye.errorValue,l._asyncData[a].pending.value=!1,l._asyncData[a].status.value="idle"),a in l._asyncDataPromises&&(l._asyncDataPromises[a]&&(l._asyncDataPromises[a].cancelled=!0),l._asyncDataPromises[a]=void 0)}function ns(l,a){const r={};for(const o of a)r[o]=l[o];return r}const as=he({__name:"Skeleton",props:{class:{}},setup(l){const a=l;return(r,o)=>(u(),x("div",qt({class:s(ts)("animate-pulse rounded-md bg-muted",a.class)},r.$attrs),null,16))}}),ie=l=>{if(!l||l===0)return"-";const a=1024,r=["B","KB","MB","GB","TB"],o=Math.floor(Math.log(l)/Math.log(a));return parseFloat((l/Math.pow(a,o)).toFixed(1))+" "+r[o]},Pe=l=>l?new Date(l).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",fe=l=>l&&{png:"lucide:image",jpg:"lucide:image",jpeg:"lucide:image",gif:"lucide:image",webp:"lucide:image",pdf:"lucide:file-text",doc:"lucide:file-text",docx:"lucide:file-text",xls:"lucide:file-spreadsheet",xlsx:"lucide:file-spreadsheet",mp4:"lucide:file-video",mkv:"lucide:file-video",avi:"lucide:file-video",mov:"lucide:file-video",mp3:"lucide:file-audio",wav:"lucide:file-audio",flac:"lucide:file-audio",zip:"lucide:file-archive",rar:"lucide:file-archive","7z":"lucide:file-archive"}[l.toLowerCase()]||"lucide:file",Ce=l=>({pdf:"text-red-600 bg-red-50 dark:bg-red-900/30",doc:"text-blue-600 bg-blue-50 dark:bg-blue-900/30",docx:"text-blue-600 bg-blue-50 dark:bg-blue-900/30",xls:"text-green-600 bg-green-50 dark:bg-green-900/30",xlsx:"text-green-600 bg-green-50 dark:bg-green-900/30",jpg:"text-purple-600 bg-purple-50 dark:bg-purple-900/30",jpeg:"text-purple-600 bg-purple-50 dark:bg-purple-900/30",png:"text-purple-600 bg-purple-50 dark:bg-purple-900/30",gif:"text-purple-600 bg-purple-50 dark:bg-purple-900/30",webp:"text-purple-600 bg-purple-50 dark:bg-purple-900/30",mp4:"text-pink-600 bg-pink-50 dark:bg-pink-900/30",mkv:"text-pink-600 bg-pink-50 dark:bg-pink-900/30",avi:"text-pink-600 bg-pink-50 dark:bg-pink-900/30",mov:"text-pink-600 bg-pink-50 dark:bg-pink-900/30",mp3:"text-indigo-600 bg-indigo-50 dark:bg-indigo-900/30",wav:"text-indigo-600 bg-indigo-50 dark:bg-indigo-900/30",flac:"text-indigo-600 bg-indigo-50 dark:bg-indigo-900/30",zip:"text-amber-600 bg-amber-50 dark:bg-amber-900/30",rar:"text-amber-600 bg-amber-50 dark:bg-amber-900/30","7z":"text-amber-600 bg-amber-50 dark:bg-amber-900/30"})[(l==null?void 0:l.toLowerCase())||""]||"text-gray-600 bg-gray-50 dark:bg-gray-900/30",ls=l=>{const a=new Date,o=new Date(l).getTime()-a.getTime(),e=Math.ceil(o/(1e3*60*60*24));return e<=3?"text-red-500 font-semibold":e<=7?"text-orange-500":"text-muted-foreground"},is=l=>{if(!l)return"";const a=new Date,o=new Date(l).getTime()-a.getTime(),e=Math.ceil(o/(1e3*60*60*24));return e<0?"Expired":e===0?"Expires today":e===1?"Expires tomorrow":`${e} days left`},xt=l=>l?["mp4","mkv","avi","mov","webm","wmv","flv"].includes(l.toLowerCase()):!1,ds=l=>l?["zip","rar","7z","tar","gz","bz2"].includes(l.toLowerCase()):!1,us=l=>l?["jpg","jpeg","png","gif","webp","bmp","svg"].includes(l.toLowerCase()):!1,cs=l=>l?["mp3","wav","flac","aac","ogg","m4a","wma"].includes(l.toLowerCase()):!1,gt=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});function ps(l,a){a?a={...gt,...a}:a=gt;const r=yt(a);return r.dispatch(l),r.toString()}const ms=Object.freeze(["prototype","__proto__","constructor"]);function yt(l){let a="",r=new Map;const o=e=>{a+=e};return{toString(){return a},getContext(){return r},dispatch(e){return l.replacer&&(e=l.replacer(e)),this[e===null?"null":typeof e](e)},object(e){if(e&&typeof e.toJSON=="function")return this.object(e.toJSON());const i=Object.prototype.toString.call(e);let d="";const g=i.length;g<10?d="unknown:["+i+"]":d=i.slice(8,g-1),d=d.toLowerCase();let m=null;if((m=r.get(e))===void 0)r.set(e,r.size);else return this.dispatch("[CIRCULAR:"+m+"]");if(typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(e))return o("buffer:"),o(e.toString("utf8"));if(d!=="object"&&d!=="function"&&d!=="asyncfunction")this[d]?this[d](e):l.ignoreUnknown||this.unkown(e,d);else{let h=Object.keys(e);l.unorderedObjects&&(h=h.sort());let C=[];l.respectType!==!1&&!ft(e)&&(C=ms),l.excludeKeys&&(h=h.filter(z=>!l.excludeKeys(z)),C=C.filter(z=>!l.excludeKeys(z))),o("object:"+(h.length+C.length)+":");const k=z=>{this.dispatch(z),o(":"),l.excludeValues||this.dispatch(e[z]),o(",")};for(const z of h)k(z);for(const z of C)k(z)}},array(e,i){if(i=i===void 0?l.unorderedArrays!==!1:i,o("array:"+e.length+":"),!i||e.length<=1){for(const m of e)this.dispatch(m);return}const d=new Map,g=e.map(m=>{const h=yt(l);h.dispatch(m);for(const[C,k]of h.getContext())d.set(C,k);return h.toString()});return r=d,g.sort(),this.array(g,!1)},date(e){return o("date:"+e.toJSON())},symbol(e){return o("symbol:"+e.toString())},unkown(e,i){if(o(i),!!e&&(o(":"),e&&typeof e.entries=="function"))return this.array(Array.from(e.entries()),!0)},error(e){return o("error:"+e.toString())},boolean(e){return o("bool:"+e)},string(e){o("string:"+e.length+":"),o(e)},function(e){o("fn:"),ft(e)?this.dispatch("[native]"):this.dispatch(e.toString()),l.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(e.name)),l.respectFunctionProperties&&this.object(e)},number(e){return o("number:"+e)},xml(e){return o("xml:"+e.toString())},null(){return o("Null")},undefined(){return o("Undefined")},regexp(e){return o("regex:"+e.toString())},uint8array(e){return o("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},uint8clampedarray(e){return o("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(e))},int8array(e){return o("int8array:"),this.dispatch(Array.prototype.slice.call(e))},uint16array(e){return o("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},int16array(e){return o("int16array:"),this.dispatch(Array.prototype.slice.call(e))},uint32array(e){return o("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},int32array(e){return o("int32array:"),this.dispatch(Array.prototype.slice.call(e))},float32array(e){return o("float32array:"),this.dispatch(Array.prototype.slice.call(e))},float64array(e){return o("float64array:"),this.dispatch(Array.prototype.slice.call(e))},arraybuffer(e){return o("arraybuffer:"),this.dispatch(new Uint8Array(e))},url(e){return o("url:"+e.toString())},map(e){o("map:");const i=[...e];return this.array(i,l.unorderedSets!==!1)},set(e){o("set:");const i=[...e];return this.array(i,l.unorderedSets!==!1)},file(e){return o("file:"),this.dispatch([e.name,e.size,e.type,e.lastModfied])},blob(){if(l.ignoreUnknown)return o("[blob]");throw new Error(`Hashing Blob objects is currently not supported
Use "options.replacer" or "options.ignoreUnknown"
`)},domwindow(){return o("domwindow")},bigint(e){return o("bigint:"+e.toString())},process(){return o("process")},timer(){return o("timer")},pipe(){return o("pipe")},tcp(){return o("tcp")},udp(){return o("udp")},tty(){return o("tty")},statwatcher(){return o("statwatcher")},securecontext(){return o("securecontext")},connection(){return o("connection")},zlib(){return o("zlib")},context(){return o("context")},nodescript(){return o("nodescript")},httpparser(){return o("httpparser")},dataview(){return o("dataview")},signal(){return o("signal")},fsevent(){return o("fsevent")},tlswrap(){return o("tlswrap")}}}const wt="[native code] }",gs=wt.length;function ft(l){return typeof l!="function"?!1:Function.prototype.toString.call(l).slice(-gs)===wt}class de{constructor(a,r){le(this,"words");le(this,"sigBytes");a=this.words=a||[],this.sigBytes=r===void 0?a.length*4:r}toString(a){return(a||fs).stringify(this)}concat(a){if(this.clamp(),this.sigBytes%4)for(let r=0;r<a.sigBytes;r++){const o=a.words[r>>>2]>>>24-r%4*8&255;this.words[this.sigBytes+r>>>2]|=o<<24-(this.sigBytes+r)%4*8}else for(let r=0;r<a.sigBytes;r+=4)this.words[this.sigBytes+r>>>2]=a.words[r>>>2];return this.sigBytes+=a.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new de([...this.words])}}const fs={stringify(l){const a=[];for(let r=0;r<l.sigBytes;r++){const o=l.words[r>>>2]>>>24-r%4*8&255;a.push((o>>>4).toString(16),(o&15).toString(16))}return a.join("")}},hs={stringify(l){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=[];for(let o=0;o<l.sigBytes;o+=3){const e=l.words[o>>>2]>>>24-o%4*8&255,i=l.words[o+1>>>2]>>>24-(o+1)%4*8&255,d=l.words[o+2>>>2]>>>24-(o+2)%4*8&255,g=e<<16|i<<8|d;for(let m=0;m<4&&o*8+m*6<l.sigBytes*8;m++)r.push(a.charAt(g>>>6*(3-m)&63))}return r.join("")}},bs={parse(l){const a=l.length,r=[];for(let o=0;o<a;o++)r[o>>>2]|=(l.charCodeAt(o)&255)<<24-o%4*8;return new de(r,a)}},vs={parse(l){return bs.parse(unescape(encodeURIComponent(l)))}};class xs{constructor(){le(this,"_data",new de);le(this,"_nDataBytes",0);le(this,"_minBufferSize",0);le(this,"blockSize",512/32)}reset(){this._data=new de,this._nDataBytes=0}_append(a){typeof a=="string"&&(a=vs.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes}_doProcessBlock(a,r){}_process(a){let r,o=this._data.sigBytes/(this.blockSize*4);a?o=Math.ceil(o):o=Math.max((o|0)-this._minBufferSize,0);const e=o*this.blockSize,i=Math.min(e*4,this._data.sigBytes);if(e){for(let d=0;d<e;d+=this.blockSize)this._doProcessBlock(this._data.words,d);r=this._data.words.splice(0,e),this._data.sigBytes-=i}return new de(r,i)}}class ys extends xs{update(a){return this._append(a),this._process(),this}finalize(a){a&&this._append(a)}}const ht=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],ws=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],me=[];class ks extends ys{constructor(){super(...arguments);le(this,"_hash",new de([...ht]))}reset(){super.reset(),this._hash=new de([...ht])}_doProcessBlock(r,o){const e=this._hash.words;let i=e[0],d=e[1],g=e[2],m=e[3],h=e[4],C=e[5],k=e[6],z=e[7];for(let T=0;T<64;T++){if(T<16)me[T]=r[o+T]|0;else{const F=me[T-15],P=(F<<25|F>>>7)^(F<<14|F>>>18)^F>>>3,c=me[T-2],p=(c<<15|c>>>17)^(c<<13|c>>>19)^c>>>10;me[T]=P+me[T-7]+p+me[T-16]}const O=h&C^~h&k,U=i&d^i&g^d&g,B=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),j=(h<<26|h>>>6)^(h<<21|h>>>11)^(h<<7|h>>>25),v=z+j+O+ws[T]+me[T],b=B+U;z=k,k=C,C=h,h=m+v|0,m=g,g=d,d=i,i=v+b|0}e[0]=e[0]+i|0,e[1]=e[1]+d|0,e[2]=e[2]+g|0,e[3]=e[3]+m|0,e[4]=e[4]+h|0,e[5]=e[5]+C|0,e[6]=e[6]+k|0,e[7]=e[7]+z|0}finalize(r){super.finalize(r);const o=this._nDataBytes*8,e=this._data.sigBytes*8;return this._data.words[e>>>5]|=128<<24-e%32,this._data.words[(e+64>>>9<<4)+14]=Math.floor(o/4294967296),this._data.words[(e+64>>>9<<4)+15]=o,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}}function $s(l){return new ks().finalize(l).toString(hs)}function _s(l,a={}){const r=typeof l=="string"?l:ps(l,a);return $s(r).slice(0,10)}function Ds(l,a,r){const[o={},e]=typeof a=="string"?[{},a]:[a,r],i=se(()=>ge(l)),d=o.key||_s([e,typeof i.value=="string"?i.value:"",...Cs(o)]);if(!d||typeof d!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+d);const g=d===e?"$f"+d:d;if(!o.baseURL&&typeof i.value=="string"&&i.value[0]==="/"&&i.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:m,lazy:h,default:C,transform:k,pick:z,watch:T,immediate:O,getCachedData:U,deep:B,dedupe:j,...v}=o,b=Kt({...Wt,...v,cache:typeof o.cache=="boolean"?void 0:o.cache}),F={server:m,lazy:h,default:C,transform:k,pick:z,immediate:O,getCachedData:U,deep:B,dedupe:j,watch:T===!1?[]:[b,i,...T||[]]};let P;return rs(g,()=>{var I;(I=P==null?void 0:P.abort)==null||I.call(P,new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),P=typeof AbortController<"u"?new AbortController:{};const p=ge(o.timeout);let $;return p&&($=setTimeout(()=>P.abort(new DOMException("Request aborted due to timeout.","AbortError")),p),P.signal.onabort=()=>clearTimeout($)),(o.$fetch||globalThis.$fetch)(i.value,{signal:P.signal,...b}).finally(()=>{clearTimeout($)})},F)}function Cs(l){var r;const a=[((r=ge(l.method))==null?void 0:r.toUpperCase())||"GET",ge(l.baseURL)];for(const o of[l.params||l.query]){const e=ge(o);if(!e)continue;const i={};for(const[d,g]of Object.entries(e))i[ge(d)]=ge(g);a.push(i)}return a}async function Ss(){const l=we(),a=D(""),r=D("modified"),o=D("list"),e=D(1),i=D("/"),d=D(null),g=50,{data:m,pending:h,error:C,refresh:k}=await Ds("/api/my-files",{server:!1,async onRequest({options:p}){const{data:{session:$}}=await l.auth.getSession();if($!=null&&$.access_token){const M=p.headers||{};p.headers={...M,Authorization:`Bearer ${$.access_token}`}}}},"$Lz1Zhj65EL"),z=se(()=>m.value||[]),T=se(()=>{if(!m.value)return[];const p=new Set;return m.value.forEach($=>{$.virtualFolder&&p.add($.virtualFolder)}),Array.from(p).map($=>{var M;return{id:`vf-${$}`,name:$,path:`/virtual/${$}`,size:0,modified:new Date().toISOString(),extension:null,accountId:"",type:"folder",isVirtual:!0,fileCount:((M=m.value)==null?void 0:M.filter(I=>I.virtualFolder===$).length)||0}})}),O=se(()=>{if(!m.value)return[];if(d.value)return m.value.filter($=>$.virtualFolder===d.value);const p=i.value;if(p==="/"){const $=m.value.filter(y=>y.isVirtualFolder===!0),I=m.value.filter(y=>!y.isVirtualFolder).filter(y=>!y.virtualFolder),N=T.value,re=new Map;return $.forEach(y=>{re.set(y.name,{...y,fileCount:0,isVirtual:!1})}),N.forEach(y=>{if(re.has(y.name)){const E=re.get(y.name);E.fileCount=y.fileCount,E.isVirtual=!0}else re.set(y.name,y)}),[...Array.from(re.values()),...I.filter(y=>y.type!=="folder")]}return m.value.filter($=>$.path.startsWith(p+"/")?!$.path.substring(p.length+1).includes("/"):!1)}),U=se(()=>O.value.filter($=>$.name.toLowerCase().includes(a.value.toLowerCase())).sort(($,M)=>$.type===M.type?new Date(M.modified||0).getTime()-new Date($.modified||0).getTime():$.type==="folder"?-1:1)),B=se(()=>Math.ceil(U.value.length/g)),j=se(()=>{const p=(e.value-1)*g;return U.value.slice(p,p+g)}),v=p=>i.value=p,b=p=>d.value=p,F=se(()=>{const p=[{name:"Home",path:"/",isVirtual:!1}];if(d.value)return p.push({name:d.value,path:`/virtual/${d.value}`,isVirtual:!0}),p;const $=i.value.split("/").filter(I=>I);let M="/";return $.forEach(I=>{M=M==="/"?`/${I}`:`${M}/${I}`,p.push({name:I,path:M,isVirtual:!1})}),p}),P=p=>{p.path==="/"?(d.value=null,i.value="/"):p.isVirtual||(d.value=null,v(p.path))},c=p=>{p.isVirtualFolder||p.isVirtual||p.isPersistent?b(p.name):p.type==="folder"&&v(p.path)};return vt([a,r],()=>e.value=1),{searchQuery:a,sortBy:r,viewMode:o,currentPage:e,currentPath:i,currentVirtualFolder:d,totalPages:B,files:z,pending:h,error:C,refresh:k,virtualFolders:T,filteredFiles:O,sortedFiles:U,paginatedFiles:j,breadcrumbs:F,navigateToFolder:v,navigateToVirtualFolder:b,handleBreadcrumbClick:P,handleFolderClick:c}}function Fs(l){const a=D(new Set),r=se(()=>{const m=l.value.filter(h=>h.type!=="folder");return m.length>0&&m.every(h=>a.value.has(h.id))}),o=se(()=>{const m=l.value.filter(C=>C.type!=="folder"),h=m.filter(C=>a.value.has(C.id)).length;return h>0&&h<m.length}),e=se(()=>a.value.size);return{selectedFiles:a,isAllSelected:r,isPartiallySelected:o,selectedCount:e,toggleSelectAll:()=>{const m=l.value.filter(h=>h.type!=="folder");r.value?m.forEach(h=>a.value.delete(h.id)):m.forEach(h=>a.value.add(h.id)),a.value=new Set(a.value)},toggleFileSelection:m=>{m.type!=="folder"&&(a.value.has(m.id)?a.value.delete(m.id):a.value.add(m.id),a.value=new Set(a.value))},clearSelection:()=>{a.value=new Set}}}function Es(l){const{toast:a}=Ae(),r=we(),o=D(null),e=D(null),i=D(!1),d=D(!1),g=D(null),m=(v,b)=>{if(v.button!==0)return;const F=v.currentTarget;g.value=setTimeout(()=>{d.value=!0,navigator.vibrate&&navigator.vibrate(50),F.classList.add("ring-2","ring-blue-400","scale-[1.02]")},400)},h=v=>{g.value&&(clearTimeout(g.value),g.value=null),d.value&&v&&v.currentTarget&&v.currentTarget.classList.remove("ring-2","ring-blue-400","scale-[1.02]"),o.value||(d.value=!1)},C=(v,b)=>{if(!d.value){v.preventDefault();return}v.stopPropagation(),o.value=b,v.dataTransfer&&(v.dataTransfer.effectAllowed="move",v.dataTransfer.setData("application/x-file-move",b.id));const F=v.target;F.style.opacity="0.5"},k=v=>{o.value=null,e.value=null,d.value=!1;const b=v.target;b.style.opacity="1",b.classList.remove("ring-2","ring-blue-400","scale-[1.02]")},z=(v,b)=>{o.value&&b.type==="folder"&&o.value.id!==b.id&&(v.preventDefault(),v.dataTransfer&&(v.dataTransfer.dropEffect="move"),e.value=b.id)},T=v=>{e.value=null},O=async(v,b)=>{var F;i.value=!0;try{const{data:{session:P}}=await r.auth.getSession(),c=b.path==="/"?null:b.name;console.log("[Move] Organizing file:",{fileId:v.id,fileName:v.name,targetFolder:c}),await $fetch("/api/files/update-folder",{method:"POST",body:{fileId:v.id,virtualFolder:c},headers:P!=null&&P.access_token?{Authorization:`Bearer ${P.access_token}`}:void 0}),console.log(`[Move] Success: "${v.name}" -> "${b.name}"`),a.success(`Moved "${v.name}" to "${b.name}"`),await l()}catch(P){console.error("[Move] Failed:",P),a.error("Failed to organize file",((F=P.data)==null?void 0:F.statusMessage)||P.message||"Unknown error")}finally{i.value=!1}};return{draggedFile:o,dropTargetId:e,isMoving:i,isLongPress:d,startLongPress:m,cancelLongPress:h,handleDragStart:C,handleDragEnd:k,handleDragOver:z,handleDragLeave:T,handleFileDrop:async(v,b)=>{if(v.preventDefault(),e.value=null,!!o.value&&b.type==="folder"&&o.value.id!==b.id){if(b.path.startsWith(o.value.path+"/")){a.error("Cannot move a folder into itself"),o.value=null;return}await O(o.value,b),o.value=null}},handleBreadcrumbDrop:async(v,b)=>{if(v.currentTarget.classList.remove("bg-blue-100","text-blue-600","dark:bg-blue-900/40","dark:text-blue-400"),!o.value)return;const P={id:b.path==="/"?"root":`vf-${b.name}`,name:b.name,path:b.path,type:"folder",isVirtual:b.isVirtual,size:0,modified:"",extension:null,accountId:""};await O(o.value,P),o.value=null},removeFromFolder:async v=>{var b;if(v.virtualFolder){i.value=!0;try{const{data:{session:F}}=await r.auth.getSession();await $fetch("/api/files/update-folder",{method:"POST",body:{fileId:v.id,virtualFolder:null},headers:F!=null&&F.access_token?{Authorization:`Bearer ${F.access_token}`}:void 0}),console.log(`[Move] Removed "${v.name}" from folder`),a.success(`Removed "${v.name}" from folder`),await l()}catch(F){console.error("[Move] Failed to remove from folder:",F),a.error("Failed to remove from folder",((b=F.data)==null?void 0:b.statusMessage)||F.message||"Unknown error")}finally{i.value=!1}}}}}function zs(l,a){Ae();const r=we(),o=D(!1),e=D(!1),i=D(0),d=D(""),g=D(0),m=D(0),h=D(""),C=D(null),k=8*1024*1024,z=150*1024*1024,T=3;let O=null;const U=D(!0),B=async()=>{try{"wakeLock"in navigator&&(O=await navigator.wakeLock.request("screen"))}catch(y){console.warn("Wake lock not available:",y)}},j=()=>{O&&(O.release(),O=null)},v=(y=3e4)=>new Promise(E=>{if(navigator.onLine){E(!0);return}const V=setTimeout(()=>{window.removeEventListener("online",W),E(!1)},y),W=()=>{clearTimeout(V),window.removeEventListener("online",W),E(!0)};window.addEventListener("online",W)}),b=async(y,E=T,V=1e3)=>{let W=null;for(let J=0;J<E;J++)try{if(!U.value&&!await v())throw new Error("Network offline timeout");return await y()}catch(Y){W=Y,navigator.onLine||await v(),J<E-1&&await new Promise(R=>setTimeout(R,V*Math.pow(2,J)))}throw W},F=y=>y.replace(/[<>:"/\\|?*]/g,"_"),P=async(y,E,V,W)=>new Promise((J,Y)=>{const R=new XMLHttpRequest;R.open("POST","https://content.dropboxapi.com/2/files/upload"),R.setRequestHeader("Authorization",`Bearer ${E}`),R.setRequestHeader("Dropbox-API-Arg",JSON.stringify({path:V,mode:"add",autorename:!0,mute:!1})),R.setRequestHeader("Content-Type","application/octet-stream"),R.upload.onprogress=G=>{G.lengthComputable&&W(G.loaded/G.total*100)},R.onload=()=>{if(R.status>=200&&R.status<300)try{J(JSON.parse(R.responseText))}catch{J({path_display:V})}else Y(new Error(`Upload failed: ${R.status} ${R.statusText}`))},R.onerror=()=>Y(new Error("Network error")),R.send(y)}),c=async(y,E,V,W)=>{const J=y.slice(0,Math.min(k,y.size)),Y=await fetch("https://content.dropboxapi.com/2/files/upload_session/start",{method:"POST",headers:{Authorization:`Bearer ${E}`,"Dropbox-API-Arg":JSON.stringify({close:!1}),"Content-Type":"application/octet-stream"},body:J});if(!Y.ok)throw new Error(`Start session failed: ${Y.status}`);const G=(await Y.json()).session_id;let Z=J.size;for(W(Z/y.size*100);Z<y.size-k;){const ue=y.slice(Z,Z+k),be=await fetch("https://content.dropboxapi.com/2/files/upload_session/append_v2",{method:"POST",headers:{Authorization:`Bearer ${E}`,"Dropbox-API-Arg":JSON.stringify({cursor:{session_id:G,offset:Z},close:!1}),"Content-Type":"application/octet-stream"},body:ue});if(!be.ok)throw new Error(`Append failed: ${be.status}`);Z+=ue.size,W(Z/y.size*100)}const oe=y.slice(Z),Q=await fetch("https://content.dropboxapi.com/2/files/upload_session/finish",{method:"POST",headers:{Authorization:`Bearer ${E}`,"Dropbox-API-Arg":JSON.stringify({cursor:{session_id:G,offset:Z},commit:{path:V,mode:"add",autorename:!0,mute:!1}}),"Content-Type":"application/octet-stream"},body:oe});if(!Q.ok)throw new Error(`Finish failed: ${Q.status}`);const K=await Q.json();return W(100),K},p=async y=>{if(y.length===0)return;await B(),e.value=!0,i.value=0,g.value=0,m.value=y.length,h.value="";const E=[];try{const{data:{session:V}}=await r.auth.getSession(),W=V!=null&&V.access_token?{Authorization:`Bearer ${V.access_token}`}:{},J=await b(()=>$fetch("/api/upload/allocate",{method:"POST",headers:W,body:{files:y.map((Q,K)=>({index:K,name:Q.name,size:Q.size}))}}));if(!J.success)throw new Error("Allocation failed");const Y=5,R=J.allocations.map(Q=>({file:y[Q.index],alloc:Q})),G=new Map,Z=async Q=>{const{file:K,alloc:ue}=Q,be=y.indexOf(K);try{d.value=K.name;const ke=`${l.value==="/"?"/uploads":l.value}/${F(K.name)}`,Me=K.size>z?c:P,je=await b(()=>Me(K,ue.accessToken,ke,Oe=>{G.set(be,Oe);const Be=Array.from(G.values()).reduce((Ie,Te)=>Ie+Te,0);i.value=Be/y.length}));await b(()=>$fetch("/api/dropbox/record-upload",{method:"POST",headers:W,body:{filename:K.name,dropboxPath:je.path_display||ke,size:K.size,contentType:K.type||"application/octet-stream",dropboxAccountId:ue.accountId}})),g.value++}catch(ze){console.error(`Failed to upload ${K.name}:`,ze),E.push(K.name)}},oe=[];for(const Q of R){const K=Z(Q).then(()=>{oe.splice(oe.indexOf(K),1)});oe.push(K),oe.length>=Y&&await Promise.race(oe)}await Promise.all(oe),E.length>0&&(h.value=`${E.length} file(s) failed`),await a()}catch(V){h.value=V.message||"Upload failed"}finally{e.value=!1,j()}},$=y=>{var E;(E=y.dataTransfer)!=null&&E.types.includes("Files")&&(o.value=!0)},M=()=>{o.value=!1},I=y=>{var V;o.value=!1;const E=(V=y.dataTransfer)==null?void 0:V.files;E&&E.length>0&&p(Array.from(E))},N=y=>{const E=y.target;E.files&&E.files.length>0&&(p(Array.from(E.files)),E.value="")},re=()=>{var y;(y=C.value)==null||y.click()};return Gt(()=>{U.value=navigator.onLine,window.addEventListener("online",()=>U.value=!0),window.addEventListener("offline",()=>U.value=!1),window.addEventListener("beforeunload",y=>{e.value&&(y.preventDefault(),y.returnValue="Upload in progress")})}),bt(()=>{j()}),{isDragging:o,isUploading:e,uploadProgress:i,uploadingFileName:d,uploadedCount:g,totalUploadCount:m,uploadError:h,fileInput:C,handleExternalDragOver:$,handleExternalDragLeave:M,handleDrop:I,handleFileSelect:N,triggerFileInput:re}}function Bs(){const l=we(),a=D(null),r=D(null),o=D(!1),e=D(null);return{previewTarget:a,previewUrl:r,isLoadingPreview:o,previewError:e,openPreview:async m=>{var h;a.value=m,r.value=null,e.value=null,o.value=!0;try{const{data:{session:C}}=await l.auth.getSession(),k=await $fetch("/api/dropbox/download",{query:{path:m.path,accountId:m.accountId},headers:C!=null&&C.access_token?{Authorization:`Bearer ${C.access_token}`}:{}});r.value=k.link}catch(C){e.value=((h=C.data)==null?void 0:h.message)||C.message}finally{o.value=!1}},closePreview:()=>{a.value=null,r.value=null,e.value=null},handleExternalLink:m=>{m&&window.open(m,"_blank")}}}function Ts(){const{toast:l}=Ae(),a=we(),r=D(null),o=D(null),e=D(!1),i=D(!1),d=D("link"),g=[{days:1,label:"1 Day"},{days:7,label:"7 Days"},{days:"never",label:"Never"}],m=D(7),h=D(!1),C=D(!1),k=D(!1),z=c=>{r.value=c,i.value=!1,m.value=7,d.value="link",c.shareId&&c.shareUrl?o.value={id:c.shareId,url:`${window.location.origin}${c.shareUrl}`,expiresAt:c.shareExpiresAt||null}:o.value=null},T=()=>{r.value=null,o.value=null,k.value=!1},O=async()=>{if(r.value){e.value=!0;try{const{data:{session:c}}=await a.auth.getSession(),p=await $fetch("/api/shares/create",{method:"POST",body:{accountId:r.value.accountId,filePath:r.value.path,fileName:r.value.name,expirationDays:m.value==="never"?null:m.value,expirationUnit:"days"},headers:c!=null&&c.access_token?{Authorization:`Bearer ${c.access_token}`}:{}});o.value={id:p.share.id,url:p.share.url,expiresAt:p.share.expiresAt},l.success("Link created")}catch(c){l.error("Share failed",c.message)}finally{e.value=!1}}},U=async()=>{o.value&&(await navigator.clipboard.writeText(o.value.url),i.value=!0,setTimeout(()=>i.value=!1,2e3))},B=c=>`<iframe src="${window.location.origin}/embed/${c}" width="100%" height="100%" frameborder="0" allowfullscreen></iframe>`,j=c=>`${window.location.origin}/embed/${c}`;return{shareTarget:r,shareResult:o,isSharing:e,copied:i,shareTab:d,expirationOptions:g,selectedExpiration:m,isGeneratingEmbed:h,isDeletingShare:C,confirmDeleteShare:k,openShareModal:z,closeShareModal:T,handleShare:O,copyShareLink:U,generateEmbed:async c=>{h.value=!0;try{const{data:{session:p}}=await a.auth.getSession(),$=await $fetch("/api/embed/generate",{method:"POST",body:{fileId:c.id},headers:p!=null&&p.access_token?{Authorization:`Bearer ${p.access_token}`}:{}});o.value={id:$.shareId,url:$.shareUrl,expiresAt:$.expiresAt},d.value="embed"}catch(p){l.error("Generate embed failed",p.message)}finally{h.value=!1}},deleteShareLink:async c=>{var p;if((p=o.value)!=null&&p.id){if(!k.value){k.value=!0;return}C.value=!0;try{const{data:{session:$}}=await a.auth.getSession();await $fetch(`/api/shares/${o.value.id}`,{method:"DELETE",headers:$!=null&&$.access_token?{Authorization:`Bearer ${$.access_token}`}:{}}),await c(),o.value=null,T()}catch($){l.error("Delete failed",$.message)}finally{C.value=!1,k.value=!1}}},getEmbedCode:B,getEmbedUrl:j,copyEmbedCode:async c=>{await navigator.clipboard.writeText(B(c)),i.value=!0,setTimeout(()=>i.value=!1,2e3)},copyEmbedUrl:async c=>{await navigator.clipboard.writeText(j(c)),i.value=!0,setTimeout(()=>i.value=!1,2e3)}}}function Ls(l,a,r,o){const{toast:e}=Ae(),i=we(),d=D(!1),g=D(""),m=D(""),h=D(!1),C=async()=>{if(g.value.trim()){d.value=!0,m.value="";try{const{data:{session:c}}=await i.auth.getSession();await $fetch("/api/folder/create",{method:"POST",body:{name:g.value},headers:c!=null&&c.access_token?{Authorization:`Bearer ${c.access_token}`}:{}}),await r(),h.value=!1,g.value="",e.success(`Folder "${g.value}" created`)}catch(c){m.value=c.statusMessage||"Failed to create folder",e.error("Failed to create folder",m.value)}finally{d.value=!1}}},k=D(!1),z=async()=>{if(a.value.size===0)return;const c=a.value.size;if(confirm(`Are you sure you want to delete ${c} file(s)?`)){k.value=!0;try{const{data:{session:p}}=await i.auth.getSession(),$=l.value.filter(N=>a.value.has(N.id)),I=(await Promise.allSettled($.map(N=>$fetch("/api/files/delete",{method:"POST",body:{fileId:N.id},headers:p!=null&&p.access_token?{Authorization:`Bearer ${p.access_token}`}:{}})))).filter(N=>N.status==="rejected").length;I>0?e.warning(`${c-I} deleted, ${I} failed`):e.success(`${c} deleted`),await r(),o()}catch(p){e.error("Failed to delete files",p.message)}finally{k.value=!1}}},T=D(!1),O=async()=>{if(a.value.size!==0){T.value=!0;try{const{data:{session:c}}=await i.auth.getSession(),p=c!=null&&c.access_token?{Authorization:`Bearer ${c.access_token}`}:{},$=l.value.filter(M=>a.value.has(M.id));for(const M of $){const I=await $fetch("/api/dropbox/download",{method:"POST",body:{path:M.path,accountId:M.accountId},headers:p}),N=document.createElement("a");N.href=I.url,N.download=M.name,N.target="_blank",document.body.appendChild(N),N.click(),document.body.removeChild(N),await new Promise(re=>setTimeout(re,300))}o()}catch(c){e.error("Download failed",c.message)}finally{T.value=!1}}},U=async c=>{try{const{data:{session:p}}=await i.auth.getSession(),{link:$}=await $fetch("/api/dropbox/download",{query:{path:c.path,accountId:c.accountId},headers:p!=null&&p.access_token?{Authorization:`Bearer ${p.access_token}`}:{}});window.open($,"_blank")}catch(p){e.error("Download failed",p.message)}},B=D(null),j=D(!1),v=c=>{var p;if(c.isVirtual||(p=c.id)!=null&&p.startsWith("vf-")){alert("Virtual folders cannot be deleted directly.");return}B.value=c},b=async()=>{if(B.value){j.value=!0;try{const{data:{session:c}}=await i.auth.getSession();await $fetch("/api/files/delete",{method:"POST",body:{fileId:B.value.id},headers:c!=null&&c.access_token?{Authorization:`Bearer ${c.access_token}`}:{}}),await r(),B.value=null,e.success("File deleted")}catch(c){e.error("Delete failed",c.message)}finally{j.value=!1}}},F=D(null);return{isCreatingFolder:d,newFolderName:g,folderError:m,createFolderModalOpen:h,createFolder:C,isBulkDeleting:k,handleBulkDelete:z,isBulkDownloading:T,handleBulkDownload:O,handleDownload:U,deleteTarget:B,isDeleting:j,confirmDelete:v,handleDelete:b,copiedFileId:F,copyExistingLink:async c=>{c.shareUrl&&(await navigator.clipboard.writeText(`${window.location.origin}${c.shareUrl}`),F.value=c.id,setTimeout(()=>F.value=null,2e3))}}}const Ps={class:"flex items-center gap-6 text-sm"},As={class:"flex flex-col"},Ms={class:"font-medium text-foreground"},js={class:"flex flex-col"},Os={class:"font-medium text-foreground"},Is={class:"flex flex-col"},Us={class:"font-medium text-foreground"},Rs=he({__name:"FileStats",props:{totalSizeFormatted:{},filesCount:{},activeSharesCount:{}},setup(l){return(a,r)=>(u(),x("div",Ps,[t("div",As,[r[0]||(r[0]=t("span",{class:"text-xs font-semibold text-muted-foreground uppercase tracking-wide"},"Storage",-1)),t("span",Ms,S(l.totalSizeFormatted)+" Used",1)]),r[3]||(r[3]=t("div",{class:"w-px h-8 bg-border hidden md:block"},null,-1)),t("div",js,[r[1]||(r[1]=t("span",{class:"text-xs font-semibold text-muted-foreground uppercase tracking-wide"},"Files",-1)),t("span",Os,S(l.filesCount)+" Items",1)]),r[4]||(r[4]=t("div",{class:"w-px h-8 bg-border hidden md:block"},null,-1)),t("div",Is,[r[2]||(r[2]=t("span",{class:"text-xs font-semibold text-muted-foreground uppercase tracking-wide"},"Shared",-1)),t("span",Us,S(l.activeSharesCount)+" Active",1)])]))}}),Ns={class:"flex items-center gap-3"},Vs={class:"relative group"},Hs=["value"],qs=["title"],Ks=he({__name:"FileToolbar",props:{searchQuery:{},viewMode:{}},emits:["update:searchQuery","toggle-view","create-folder","upload"],setup(l){return(a,r)=>{const o=Ee;return u(),x("div",Ns,[t("div",Vs,[w(o,{name:"lucide:search",class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground group-focus-within:text-primary transition-colors"}),t("input",{value:l.searchQuery,onInput:r[0]||(r[0]=e=>a.$emit("update:searchQuery",e.target.value)),type:"text",placeholder:"Search files...",class:"h-10 pl-9 pr-4 w-full md:w-64 rounded-full border bg-muted/20 hover:bg-muted/40 focus:bg-background focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all text-sm"},null,40,Hs)]),r[6]||(r[6]=t("div",{class:"h-6 w-px bg-border mx-1"},null,-1)),t("button",{class:"p-2 rounded-full hover:bg-muted transition-colors text-muted-foreground hover:text-foreground",onClick:r[1]||(r[1]=e=>a.$emit("toggle-view")),title:l.viewMode==="list"?"Switch to Grid":"Switch to List"},[w(o,{name:l.viewMode==="list"?"lucide:layout-grid":"lucide:align-justify",class:"h-5 w-5"},null,8,["name"])],8,qs),t("button",{onClick:r[2]||(r[2]=e=>a.$emit("create-folder")),class:"h-10 px-4 rounded-full border border-input hover:bg-accent hover:text-accent-foreground font-medium text-sm transition-all flex items-center gap-2"},[w(o,{name:"lucide:folder-plus",class:"h-4 w-4"}),r[4]||(r[4]=t("span",{class:"hidden sm:inline"},"New Folder",-1))]),t("button",{onClick:r[3]||(r[3]=e=>a.$emit("upload")),class:"h-10 px-5 rounded-full bg-primary hover:bg-primary/90 text-primary-foreground font-medium text-sm shadow-sm transition-all hover:shadow-md flex items-center gap-2 active:scale-95"},[w(o,{name:"lucide:upload",class:"h-4 w-4"}),r[5]||(r[5]=t("span",null,"Upload",-1))])])}}}),Ws={class:"flex items-center text-sm overflow-x-auto no-scrollbar mask-gradient-right -mx-6 px-6"},Gs={class:"flex items-center gap-1 whitespace-nowrap"},Js=["onClick","onDrop"],Qs={key:1},Xs={key:3},Ys=he({__name:"Breadcrumbs",props:{breadcrumbs:{},isDraggingInternal:{type:Boolean}},emits:["navigate","drop"],setup(l,{emit:a}){const r=e=>{e.currentTarget.classList.add("bg-blue-100","text-blue-600","dark:bg-blue-900/40","dark:text-blue-400"),e.dataTransfer&&(e.dataTransfer.dropEffect="move")},o=e=>{e.currentTarget.classList.remove("bg-blue-100","text-blue-600","dark:bg-blue-900/40","dark:text-blue-400")};return(e,i)=>{const d=Ee;return u(),x("nav",Ws,[t("ol",Gs,[(u(!0),x(Se,null,Fe(l.breadcrumbs,(g,m)=>(u(),x("li",{key:g.path,class:"flex items-center"},[m>0?(u(),A(d,{key:0,name:"lucide:chevron-right",class:"h-4 w-4 text-muted-foreground mx-1"})):L("",!0),t("button",{onClick:h=>e.$emit("navigate",g),onDrop:q(h=>e.$emit("drop",h,g),["prevent"]),onDragover:q(r,["prevent"]),onDragleave:o,class:X(["hover:bg-muted px-2 py-1 rounded-md transition-colors font-medium flex items-center gap-1",m===l.breadcrumbs.length-1?"text-foreground cursor-default pointer-events-none":"text-muted-foreground hover:text-foreground"])},[m===0?(u(),A(d,{key:0,name:"lucide:home",class:"h-4 w-4"})):L("",!0),m===0?(u(),x("span",Qs,"My Files")):g.isVirtual?(u(),A(d,{key:2,name:"lucide:folder",class:"h-4 w-4 text-blue-500"})):L("",!0),m>0?(u(),x("span",Xs,S(g.name),1)):L("",!0)],42,Js)]))),128))])])}}}),Zs={class:"w-full text-left border-collapse"},er={class:"sticky top-0 bg-background/95 backdrop-blur z-10"},tr={class:"py-3 px-2 w-10 border-b"},sr={class:"flex items-center justify-center"},rr=["checked","indeterminate"],or={class:"divide-y divide-border/40"},nr=["onClick","onMousedown","onDragstart","onDragover","onDrop"],ar={class:"py-3 px-2"},lr={class:"flex items-center justify-center"},ir=["checked","onChange"],dr={class:"py-3 px-4"},ur={class:"flex items-center gap-4"},cr={class:"relative shrink-0"},pr={key:0,class:"absolute -bottom-1 -right-1 block h-3 w-3 rounded-full bg-green-500 border-2 border-background ring-1 ring-green-100"},mr={class:"min-w-0 pr-4"},gr=["title"],fr={key:0,class:"flex items-center gap-2 mt-0.5 md:hidden"},hr={class:"text-xs text-muted-foreground"},br={class:"text-xs text-muted-foreground"},vr={key:1,class:"flex items-center gap-2 mt-0.5 md:hidden"},xr={class:"py-3 px-4 text-sm text-[#52555A] hidden md:table-cell font-mono text-xs"},yr={class:"py-3 px-4 text-sm text-[#52555A] hidden lg:table-cell"},wr={class:"py-3 px-4 text-sm hidden lg:table-cell"},kr={key:0,class:"flex flex-col items-start gap-1"},$r={class:"flex items-center gap-1.5 text-xs text-green-600 font-medium px-2 py-1 bg-green-50 rounded-full w-fit"},_r={key:1,class:"text-xs text-muted-foreground italic"},Dr={class:"py-3 px-4 text-right"},Cr={class:"flex items-center justify-end gap-1 opacity-100 md:opacity-0 group-hover:opacity-100 transition-opacity"},Sr=["onClick","title"],Fr=["onClick"],Er=["onClick"],zr=["onClick"],Br=["onClick"],Tr=["onClick"],Lr=he({__name:"FileList",props:{files:{},selectedFiles:{},isAllSelected:{type:Boolean},isPartiallySelected:{type:Boolean},sortBy:{},dropTargetId:{},draggedFile:{},copiedFileId:{}},emits:["toggle-select-all","update:sortBy","row-click","toggle-file-selection","long-press-start","long-press-cancel","drag-start","drag-end","drag-over","drag-leave","drop","action"],setup(l){return(a,r)=>{const o=Ee;return u(),x("table",Zs,[t("thead",er,[t("tr",null,[t("th",tr,[t("div",sr,[t("input",{type:"checkbox",checked:l.isAllSelected,indeterminate:l.isPartiallySelected,onChange:r[0]||(r[0]=e=>a.$emit("toggle-select-all")),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"},null,40,rr)])]),t("th",{class:"py-3 px-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider border-b w-1/2 cursor-pointer hover:text-foreground group",onClick:r[1]||(r[1]=e=>a.$emit("update:sortBy","name"))},[r[9]||(r[9]=ee(" Name ",-1)),l.sortBy==="name"?(u(),A(o,{key:0,name:"lucide:chevron-down",class:"inline h-3 w-3 ml-1"})):L("",!0)]),t("th",{class:"py-3 px-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider border-b w-32 hidden md:table-cell hover:bg-muted/50 cursor-pointer",onClick:r[2]||(r[2]=e=>a.$emit("update:sortBy","size"))},[r[10]||(r[10]=ee(" Size ",-1)),l.sortBy==="size"?(u(),A(o,{key:0,name:"lucide:chevron-down",class:"inline h-3 w-3 ml-1"})):L("",!0)]),t("th",{class:"py-3 px-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider border-b w-40 hidden lg:table-cell hover:bg-muted/50 cursor-pointer",onClick:r[3]||(r[3]=e=>a.$emit("update:sortBy","modified"))},[r[11]||(r[11]=ee(" Modified ",-1)),l.sortBy==="modified"?(u(),A(o,{key:0,name:"lucide:chevron-down",class:"inline h-3 w-3 ml-1"})):L("",!0)]),r[12]||(r[12]=t("th",{class:"py-3 px-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider border-b w-32 hidden lg:table-cell"},"Members",-1)),r[13]||(r[13]=t("th",{class:"py-3 px-6 text-right text-xs font-semibold text-muted-foreground uppercase tracking-wider border-b w-24"},"Actions",-1))])]),t("tbody",or,[(u(!0),x(Se,null,Fe(l.files,e=>{var i;return u(),x("tr",{key:e.id,class:X(["group transition-colors duration-200",[l.selectedFiles.has(e.id)?"bg-blue-50 dark:bg-blue-900/20":"hover:bg-[#F7F9FA] dark:hover:bg-muted/20",l.dropTargetId===e.id?"bg-blue-100 dark:bg-blue-800/30 ring-2 ring-blue-400 ring-inset":"",((i=l.draggedFile)==null?void 0:i.id)===e.id?"opacity-50":"","cursor-pointer select-none"]]),draggable:!0,onClick:d=>a.$emit("row-click",e),onMousedown:d=>a.$emit("long-press-start",d,e),onMouseup:r[5]||(r[5]=d=>a.$emit("long-press-cancel")),onMouseleave:r[6]||(r[6]=d=>a.$emit("long-press-cancel")),onDragstart:d=>a.$emit("drag-start",d,e),onDragend:r[7]||(r[7]=d=>a.$emit("drag-end",d)),onDragover:d=>a.$emit("drag-over",d,e),onDragleave:r[8]||(r[8]=d=>a.$emit("drag-leave",d)),onDrop:d=>a.$emit("drop",d,e)},[t("td",ar,[t("div",lr,[t("input",{type:"checkbox",checked:l.selectedFiles.has(e.id),onClick:r[4]||(r[4]=q(()=>{},["stop"])),onChange:d=>a.$emit("toggle-file-selection",e),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"},null,40,ir)])]),t("td",dr,[t("div",ur,[t("div",cr,[t("div",{class:X(["h-10 w-10 rounded-lg flex items-center justify-center transition-colors",e.type==="folder"?"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400":s(Ce)(e.extension)])},[w(o,{name:e.type==="folder"?"lucide:folder":s(fe)(e.extension),class:X(["h-5 w-5",{"fill-blue-500/20":e.type==="folder"}])},null,8,["name","class"])],2),e.shareUrl&&e.type!=="folder"?(u(),x("span",pr)):L("",!0)]),t("div",mr,[t("p",{class:"font-medium text-sm text-foreground dark:text-foreground truncate transition-colors group-hover:text-primary",title:e.name},S(e.name),9,gr),e.type!=="folder"?(u(),x("div",fr,[t("span",hr,S(s(ie)(e.size)),1),r[14]||(r[14]=t("span",{class:"text-xs text-muted-foreground"},"â€¢",-1)),t("span",br,S(s(Pe)(e.modified)),1)])):(u(),x("div",vr,[...r[15]||(r[15]=[t("span",{class:"text-xs text-muted-foreground"},"Folder",-1)])]))])])]),t("td",xr,S(s(ie)(e.size)),1),t("td",yr,S(s(Pe)(e.modified)),1),t("td",wr,[e.shareUrl?(u(),x("div",kr,[t("div",$r,[w(o,{name:"lucide:globe",class:"h-3 w-3"}),r[16]||(r[16]=t("span",null,"Link active",-1))]),e.shareExpiresAt?(u(),x("span",{key:0,class:X([s(ls)(e.shareExpiresAt),"text-[10px] ml-1"])},S(s(is)(e.shareExpiresAt)),3)):L("",!0)])):(u(),x("div",_r,"Only you"))]),t("td",Dr,[t("div",Cr,[e.shareUrl?(u(),x("button",{key:0,onClick:q(d=>a.$emit("action","copy-link",e),["stop"]),title:l.copiedFileId===e.id?"Copied":"Copy link",class:X(["h-8 w-8 flex items-center justify-center rounded hover:bg-white hover:text-green-600 hover:shadow-sm transition-all",l.copiedFileId===e.id?"text-green-600 bg-green-50":"text-muted-foreground"])},[w(o,{name:l.copiedFileId===e.id?"lucide:check":"lucide:link",class:"h-4 w-4"},null,8,["name"])],10,Sr)):L("",!0),t("button",{onClick:q(d=>a.$emit("action","preview",e),["stop"]),title:"Preview",class:"h-8 w-8 flex items-center justify-center rounded hover:bg-purple-50 hover:text-purple-600 hover:shadow-sm transition-all text-muted-foreground"},[w(o,{name:"lucide:eye",class:"h-4 w-4"})],8,Fr),t("button",{onClick:q(d=>a.$emit("action","share",e),["stop"]),title:"Share",class:"h-8 w-8 flex items-center justify-center rounded hover:bg-primary hover:text-primary-foreground hover:shadow-sm transition-all text-muted-foreground"},[w(o,{name:"lucide:share-2",class:"h-4 w-4"})],8,Er),t("button",{onClick:q(d=>a.$emit("action","download",e),["stop"]),title:"Download",class:"h-8 w-8 flex items-center justify-center rounded hover:bg-background hover:text-primary hover:shadow-sm transition-all text-muted-foreground"},[w(o,{name:"lucide:download",class:"h-4 w-4"})],8,zr),e.virtualFolder?(u(),x("button",{key:1,onClick:q(d=>a.$emit("action","remove-from-folder",e),["stop"]),title:"Remove from folder",class:"h-8 w-8 flex items-center justify-center rounded hover:bg-orange-50 hover:text-orange-600 hover:shadow-sm transition-all text-muted-foreground"},[w(o,{name:"lucide:folder-minus",class:"h-4 w-4"})],8,Br)):L("",!0),t("button",{onClick:q(d=>a.$emit("action","delete",e),["stop"]),title:"Delete",class:"h-8 w-8 flex items-center justify-center rounded hover:bg-red-50 hover:text-red-600 hover:shadow-sm transition-all text-muted-foreground"},[w(o,{name:"lucide:trash-2",class:"h-4 w-4"})],8,Tr)])])],42,nr)}),128))])])}}}),Pr={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4"},Ar=["onClick","onMousedown","onDragstart","onDragover","onDrop"],Mr=["checked","onChange"],jr={class:"absolute top-2 right-2 flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity z-10"},Or=["onClick"],Ir=["onClick"],Ur=["onClick"],Rr=["onClick"],Nr=["onClick"],Vr={key:0,class:"absolute bottom-16 right-4 text-[10px] font-bold bg-black/70 text-white px-1.5 py-0.5 rounded"},Hr=["onClick","title"],qr={class:"text-xs text-[#52555A] mt-1 space-x-1"},Kr=he({__name:"FileGrid",props:{files:{},selectedFiles:{},dropTargetId:{},draggedFile:{}},emits:["row-click","toggle-file-selection","long-press-start","long-press-cancel","drag-start","drag-end","drag-over","drag-leave","drop","action"],setup(l){return(a,r)=>{const o=Ee;return u(),x("div",Pr,[(u(!0),x(Se,null,Fe(l.files,e=>{var i,d;return u(),x("div",{key:e.id,class:X(["group relative bg-card border rounded-[10px] p-4 flex flex-col items-center text-center transition-all duration-200 select-none",[l.selectedFiles.has(e.id)?"bg-blue-50 dark:bg-blue-900/20 border-blue-300 dark:border-blue-700":"hover:bg-muted/30 border-transparent hover:border-border/50",l.dropTargetId===e.id?"bg-blue-100 dark:bg-blue-800/30 ring-2 ring-blue-400":"",((i=l.draggedFile)==null?void 0:i.id)===e.id?"opacity-50":"","cursor-pointer"]]),draggable:!0,onClick:g=>a.$emit("row-click",e),onMousedown:g=>a.$emit("long-press-start",g,e),onMouseup:r[1]||(r[1]=g=>a.$emit("long-press-cancel")),onMouseleave:r[2]||(r[2]=g=>a.$emit("long-press-cancel")),onDragstart:g=>a.$emit("drag-start",g,e),onDragend:r[3]||(r[3]=g=>a.$emit("drag-end",g)),onDragover:g=>a.$emit("drag-over",g,e),onDragleave:r[4]||(r[4]=g=>a.$emit("drag-leave",g)),onDrop:g=>a.$emit("drop",g,e)},[e.type!=="folder"?(u(),x("div",{key:0,class:X(["absolute top-3 left-3 transition-opacity z-10",l.selectedFiles.has(e.id)?"opacity-100":"opacity-0 group-hover:opacity-100"])},[t("input",{type:"checkbox",checked:l.selectedFiles.has(e.id),onClick:r[0]||(r[0]=q(()=>{},["stop"])),onChange:g=>a.$emit("toggle-file-selection",e),class:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"},null,40,Mr)],2)):L("",!0),t("div",jr,[e.shareUrl?(u(),x("button",{key:0,onClick:q(g=>a.$emit("action","copy-link",e),["stop"]),class:"h-7 w-7 rounded bg-background shadow-sm border flex items-center justify-center hover:bg-green-50 text-green-600"},[w(o,{name:"lucide:link",class:"h-3.5 w-3.5"})],8,Or)):L("",!0),t("button",{onClick:q(g=>a.$emit("action","share",e),["stop"]),class:"h-7 w-7 rounded bg-background shadow-sm border flex items-center justify-center hover:bg-blue-50 text-blue-600"},[w(o,{name:"lucide:share-2",class:"h-3.5 w-3.5"})],8,Ir),e.virtualFolder?(u(),x("button",{key:1,onClick:q(g=>a.$emit("action","remove-from-folder",e),["stop"]),class:"h-7 w-7 rounded bg-background shadow-sm border flex items-center justify-center hover:bg-orange-50 text-orange-600",title:"Remove from folder"},[w(o,{name:"lucide:folder-minus",class:"h-3.5 w-3.5"})],8,Ur)):L("",!0),t("button",{onClick:q(g=>a.$emit("action","delete",e),["stop"]),class:"h-7 w-7 rounded bg-background shadow-sm border flex items-center justify-center hover:bg-red-50 text-red-600"},[w(o,{name:"lucide:trash-2",class:"h-3.5 w-3.5"})],8,Rr)]),t("div",{onClick:g=>e.type==="folder"?a.$emit("row-click",e):a.$emit("action","preview",e),class:"h-24 w-full flex items-center justify-center mb-3 cursor-pointer hover:scale-105 transition-transform"},[t("div",{class:X(["h-16 w-16 rounded-2xl flex items-center justify-center shadow-sm",e.type==="folder"?"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400":s(Ce)(e.extension)])},[w(o,{name:e.type==="folder"?"lucide:folder":s(fe)(e.extension),class:X(["h-8 w-8",{"fill-blue-500/20":e.type==="folder"}])},null,8,["name","class"])],2),s(xt)(e.extension)?(u(),x("span",Vr,S(e.duration||"VIDEO"),1)):L("",!0)],8,Nr),t("h4",{onClick:g=>e.type==="folder"?a.$emit("row-click",e):a.$emit("action","preview",e),class:"font-medium text-sm text-[#1E1919] dark:text-foreground w-full truncate px-1 cursor-pointer hover:text-[#0061FE] transition-colors",title:e.name},S(e.name),9,Hr),t("div",qr,[t("span",null,S((d=e.extension)==null?void 0:d.toUpperCase()),1),r[5]||(r[5]=t("span",null,"â€¢",-1)),t("span",null,S(s(ie)(e.size)),1)])],42,Ar)}),128))])}}}),Wr={key:0,class:"fixed inset-0 z-50 bg-blue-500/10 backdrop-blur-sm flex items-center justify-center pointer-events-none"},Gr={class:"bg-white dark:bg-card rounded-2xl p-12 shadow-2xl border-2 border-dashed border-blue-500 text-center"},Jr={class:"sticky top-0 z-20 bg-background/95 backdrop-blur border-b px-6 py-4 flex flex-col gap-4"},Qr={class:"w-full"},Xr={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},Yr={class:"flex-1 overflow-auto px-4 md:px-6 py-6 transition-all"},Zr={class:"w-full h-full"},eo={key:0,class:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 flex items-center gap-2 sm:gap-3 px-4 py-2.5 sm:px-5 sm:py-3 bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl rounded-full shadow-2xl border border-gray-200/50 dark:border-gray-700/50 max-w-[95vw] overflow-hidden"},to={class:"flex items-center gap-2 text-gray-900 dark:text-gray-100 shrink-0"},so={class:"h-6 w-6 sm:h-7 sm:w-7 rounded-full bg-blue-600 flex items-center justify-center text-xs sm:text-sm font-bold text-white shadow-sm"},ro=["disabled"],oo=["disabled"],no={key:0,class:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 flex items-center gap-3 px-5 py-3 bg-blue-600 rounded-full shadow-2xl"},ao={key:0,class:"fixed bottom-20 left-1/2 -translate-x-1/2 z-40 flex items-center gap-2 px-4 py-2 bg-gray-900/90 rounded-lg shadow-lg"},lo={key:0,class:"w-full space-y-4 animate-in fade-in duration-500"},io={class:"space-y-3"},uo={class:"flex items-center justify-between px-4 py-2 border-b"},co={class:"flex-1 space-y-2"},po={key:1,class:"p-6 rounded-lg bg-red-50 text-red-600 border border-red-100 text-center mx-auto max-w-lg mt-10"},mo={class:"text-sm opacity-80 mt-1"},go={class:"text-xl font-semibold text-foreground dark:text-foreground mb-2"},fo={class:"text-muted-foreground max-w-xs mb-8"},ho={key:0,class:"h-11 px-8 rounded-full bg-primary/10 text-primary hover:bg-primary/20 font-medium transition-colors"},bo={key:3,class:"w-full"},vo={key:4},xo={key:5,class:"flex justify-center mt-8 pb-8"},yo={class:"flex items-center gap-1 bg-muted/30 p-1 rounded-full"},wo=["disabled"],ko={class:"px-4 text-xs font-medium text-muted-foreground"},$o=["disabled"],_o={class:"bg-card w-full max-w-[480px] rounded-xl shadow-2xl border-0 overflow-hidden animate-in fade-in zoom-in-95 duration-200"},Do={class:"px-6 py-5 border-b bg-background flex items-center justify-between"},Co={class:"p-6"},So={class:"flex items-center gap-4 mb-6"},Fo={class:"min-w-0"},Eo={class:"font-medium text-sm truncate"},zo={class:"flex text-xs text-muted-foreground gap-2"},Bo={key:0,class:"space-y-5"},To={class:"p-4 bg-green-50 dark:bg-green-900/10 rounded-lg flex gap-3 border border-green-100 dark:border-green-800/30"},Lo={class:"mt-0.5"},Po={class:"flex border-b border-border mb-2"},Ao={key:0,class:"space-y-2 animate-in fade-in slide-in-from-left-2 duration-200"},Mo={class:"flex gap-2"},jo={class:"flex-1 relative"},Oo=["value"],Io={key:1,class:"space-y-4 animate-in fade-in slide-in-from-right-2 duration-200"},Uo={class:"space-y-2"},Ro={class:"flex gap-2"},No=["value"],Vo={class:"space-y-2"},Ho={class:"relative group"},qo=["value"],Ko={class:"pt-4 border-t mt-4"},Wo={key:0,class:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800/50 mb-3 animate-in fade-in slide-in-from-bottom-2 duration-200"},Go={class:"flex gap-2"},Jo=["disabled"],Qo={key:1,class:"flex items-center justify-between"},Xo={class:"text-xs text-muted-foreground"},Yo={class:"font-medium text-foreground"},Zo={class:"flex items-center gap-3"},en={key:1,class:"space-y-6"},tn={class:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg border border-purple-100 dark:border-purple-800/30"},sn={class:"flex items-start gap-3"},rn={class:"p-2 bg-purple-100 dark:bg-purple-800/30 rounded-full text-purple-600 dark:text-purple-400 shrink-0"},on=["disabled"],nn={class:"space-y-3"},an={class:"flex items-center gap-2 mb-4 px-1"},ln={class:"p-2 bg-blue-50 rounded-full text-blue-600"},dn={class:"grid grid-cols-2 gap-3"},un=["onClick"],cn=["disabled"],pn={key:1},mn={class:"bg-card w-full max-w-[400px] rounded-xl shadow-2xl border-0 overflow-hidden animate-in fade-in zoom-in-95 duration-200"},gn={class:"px-6 py-5 border-b bg-background flex items-center gap-3"},fn={class:"p-2 rounded-full bg-red-100"},hn={class:"p-6"},bn={class:"flex items-center gap-3 p-3 bg-muted/30 rounded-lg mb-4"},vn={class:"min-w-0"},xn={class:"font-medium text-sm truncate"},yn={class:"text-xs text-muted-foreground"},wn={class:"flex gap-3 justify-end"},kn=["disabled"],$n={class:"absolute top-4 left-4 z-10 flex items-center gap-3 max-w-[50%]"},_n={class:"min-w-0"},Dn={class:"text-white font-medium truncate"},Cn={class:"text-white/60 text-sm"},Sn={class:"absolute bottom-4 left-1/2 -translate-x-1/2 z-10 flex gap-2"},Fn={class:"max-w-[90vw] max-h-[80vh] flex items-center justify-center"},En={key:0,class:"flex flex-col items-center gap-4 text-white"},zn={key:1,class:"bg-card p-8 rounded-xl shadow-2xl text-center max-w-md border border-destructive/20"},Bn={class:"h-20 w-20 mx-auto mb-6 rounded-full bg-destructive/10 flex items-center justify-center text-destructive"},Tn={class:"text-muted-foreground text-sm mb-6"},Ln={class:"flex justify-center gap-3"},Pn={key:2,class:"bg-card p-8 rounded-xl shadow-2xl text-center max-w-md"},An={class:"h-20 w-20 mx-auto mb-6 rounded-2xl bg-amber-50 dark:bg-amber-900/20 flex items-center justify-center text-amber-600"},Mn={class:"font-medium text-lg mb-2"},jn=["src","alt"],On=["src"],In={key:5,class:"bg-card p-8 rounded-xl shadow-2xl text-center"},Un={class:"font-medium text-lg mb-4"},Rn=["src"],Nn={key:6,class:"bg-card p-8 rounded-xl shadow-2xl text-center max-w-md"},Vn={class:"font-medium text-lg mb-2"},Hn={class:"text-muted-foreground text-sm mb-6"},qn={key:0,class:"fixed inset-0 z-[80] flex items-center justify-center p-4 bg-[#1E1919]/60 backdrop-blur-[2px]"},Kn={class:"bg-card w-full max-w-md rounded-xl shadow-2xl border-0 overflow-hidden p-6"},Wn={class:"flex items-center gap-4 mb-6"},Gn={class:"h-12 w-12 rounded-full bg-blue-50 flex items-center justify-center text-blue-600 shrink-0"},Jn={class:"min-w-0 flex-1"},Qn={class:"text-sm text-muted-foreground truncate"},Xn={class:"mb-4"},Yn={class:"h-2 bg-muted rounded-full overflow-hidden"},Zn={class:"flex justify-between mt-2 text-xs text-muted-foreground"},ea={key:0,class:"text-sm text-red-500 mt-2"},ta={class:"bg-card w-full max-w-[400px] rounded-xl shadow-2xl border-0 overflow-hidden"},sa={class:"px-6 py-5 border-b bg-background flex items-center justify-between"},ra={class:"p-6"},oa={class:"space-y-4"},na={key:0,class:"text-sm text-red-500 bg-red-50 p-2 rounded"},aa=["disabled"],pa=he({__name:"files",async setup(l){let a,r;const{searchQuery:o,sortBy:e,viewMode:i,currentPage:d,currentPath:g,totalPages:m,files:h,pending:C,error:k,refresh:z,sortedFiles:T,paginatedFiles:O,breadcrumbs:U,navigateToFolder:B,handleBreadcrumbClick:j,handleFolderClick:v}=([a,r]=Jt(()=>Ss()),a=await a,r(),a),{selectedFiles:b,isAllSelected:F,isPartiallySelected:P,selectedCount:c,toggleSelectAll:p,toggleFileSelection:$,clearSelection:M}=Fs(O),{isCreatingFolder:I,newFolderName:N,folderError:re,createFolderModalOpen:y,createFolder:E,isBulkDeleting:V,handleBulkDelete:W,isBulkDownloading:J,handleBulkDownload:Y,handleDownload:R,deleteTarget:G,isDeleting:Z,confirmDelete:oe,handleDelete:Q,copiedFileId:K,copyExistingLink:ue}=Ls(h,b,z,M),{isDragging:be,isUploading:ze,uploadProgress:ke,uploadingFileName:Me,uploadedCount:je,totalUploadCount:Oe,uploadError:Be,fileInput:Ie,handleExternalDragOver:Te,handleExternalDragLeave:qe,handleDrop:Ke,handleFileSelect:We,triggerFileInput:Ue}=zs(g,z),{draggedFile:$e,dropTargetId:Ge,isMoving:kt,startLongPress:Je,cancelLongPress:Qe,handleDragStart:Xe,handleDragEnd:Ye,handleDragOver:Ze,handleDragLeave:et,handleFileDrop:tt,handleBreadcrumbDrop:$t,removeFromFolder:_t}=Es(z),{previewTarget:H,previewUrl:ne,isLoadingPreview:Dt,previewError:st,openPreview:Re,closePreview:ce,handleExternalLink:Ct}=Bs(),{shareTarget:ae,shareResult:pe,isSharing:rt,copied:Le,shareTab:_e,expirationOptions:St,selectedExpiration:Ne,isGeneratingEmbed:ot,isDeletingShare:nt,confirmDeleteShare:at,openShareModal:lt,closeShareModal:ve,handleShare:it,copyShareLink:dt,generateEmbed:Ft,deleteShareLink:ut,getEmbedCode:Et,getEmbedUrl:zt,copyEmbedCode:Bt,copyEmbedUrl:Tt}=Ts(),ct=te=>te.type==="folder"?v(te):Re(te),pt=(te,n)=>{switch(te){case"copy-link":ue(n);break;case"preview":Re(n);break;case"share":lt(n);break;case"download":R(n);break;case"remove-from-folder":_t(n);break;case"delete":oe(n);break}},Lt=se(()=>ie(h.value.reduce((te,n)=>te+n.size,0))),Pt=se(()=>h.value.filter(te=>te.shareUrl).length),At=te=>te?Pe(te):"Never";return(te,n)=>{const _=Ee,xe=as;return u(),x("div",{class:"h-full flex flex-col bg-background/50",onDragover:n[40]||(n[40]=q((...f)=>s(Te)&&s(Te)(...f),["prevent"])),onDragleave:n[41]||(n[41]=q((...f)=>s(qe)&&s(qe)(...f),["prevent"])),onDrop:n[42]||(n[42]=q((...f)=>s(Ke)&&s(Ke)(...f),["prevent"]))},[t("input",{ref_key:"fileInput",ref:Ie,type:"file",multiple:"",class:"hidden",onChange:n[0]||(n[0]=(...f)=>s(We)&&s(We)(...f))},null,544),s(be)&&!s($e)?(u(),x("div",Wr,[t("div",Gr,[w(_,{name:"lucide:upload-cloud",class:"h-16 w-16 mx-auto mb-4 text-blue-500"}),n[43]||(n[43]=t("p",{class:"text-xl font-semibold text-foreground"},"Drop files to upload",-1)),n[44]||(n[44]=t("p",{class:"text-sm text-muted-foreground mt-2"},"Files will be uploaded to your storage",-1))])])):L("",!0),t("div",Jr,[t("div",Qr,[t("div",Xr,[w(Rs,{"total-size-formatted":Lt.value,"files-count":s(h).length,"active-shares-count":Pt.value},null,8,["total-size-formatted","files-count","active-shares-count"]),w(Ks,{"search-query":s(o),"onUpdate:searchQuery":n[1]||(n[1]=f=>o.value=f),"view-mode":s(i),onToggleView:n[2]||(n[2]=f=>i.value=s(i)==="list"?"grid":"list"),onCreateFolder:n[3]||(n[3]=f=>y.value=!0),onUpload:s(Ue)},null,8,["search-query","view-mode","onUpload"])])]),w(Ys,{breadcrumbs:s(U),"is-dragging-internal":!!s($e),onNavigate:s(j),onDrop:s($t)},null,8,["breadcrumbs","is-dragging-internal","onNavigate","onDrop"])]),t("div",Yr,[t("div",Zr,[w(He,{"enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in","enter-from-class":"opacity-0 translate-y-4","leave-to-class":"opacity-0 translate-y-4"},{default:Ve(()=>[s(c)>0?(u(),x("div",eo,[t("div",to,[t("div",so,S(s(c)),1),n[45]||(n[45]=t("span",{class:"text-xs sm:text-sm font-medium hidden xs:inline"},"selected",-1))]),n[48]||(n[48]=t("div",{class:"w-px h-5 sm:h-6 bg-gray-200 dark:bg-gray-700 shrink-0"},null,-1)),t("button",{onClick:n[4]||(n[4]=(...f)=>s(Y)&&s(Y)(...f)),disabled:s(J),class:"flex items-center gap-2 px-3 sm:px-4 py-1.5 sm:py-2 rounded-full bg-gray-100 hover:bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200 text-xs sm:text-sm font-medium transition-all disabled:opacity-50 shrink-0"},[s(J)?(u(),A(_,{key:0,name:"lucide:loader-2",class:"h-3.5 w-3.5 sm:h-4 sm:w-4 animate-spin"})):(u(),A(_,{key:1,name:"lucide:download",class:"h-3.5 w-3.5 sm:h-4 sm:w-4"})),n[46]||(n[46]=t("span",{class:"hidden sm:inline"},"Download",-1))],8,ro),t("button",{onClick:n[5]||(n[5]=(...f)=>s(W)&&s(W)(...f)),disabled:s(V),class:"flex items-center gap-2 px-3 sm:px-4 py-1.5 sm:py-2 rounded-full bg-red-50 hover:bg-red-100 dark:bg-red-900/20 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 text-xs sm:text-sm font-medium transition-all disabled:opacity-50 shrink-0"},[s(V)?(u(),A(_,{key:0,name:"lucide:loader-2",class:"h-3.5 w-3.5 sm:h-4 sm:w-4 animate-spin"})):(u(),A(_,{key:1,name:"lucide:trash-2",class:"h-3.5 w-3.5 sm:h-4 sm:w-4"})),n[47]||(n[47]=t("span",{class:"hidden sm:inline"},"Delete",-1))],8,oo),n[49]||(n[49]=t("div",{class:"w-px h-5 sm:h-6 bg-gray-200 dark:bg-gray-700 shrink-0"},null,-1)),t("button",{onClick:n[6]||(n[6]=(...f)=>s(M)&&s(M)(...f)),class:"p-1.5 sm:p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 transition-colors shrink-0",title:"Clear selection"},[w(_,{name:"lucide:x",class:"h-4 w-4"})])])):L("",!0)]),_:1}),w(He,{"enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in","enter-from-class":"opacity-0 translate-y-4","leave-to-class":"opacity-0 translate-y-4"},{default:Ve(()=>[s(kt)?(u(),x("div",no,[w(_,{name:"lucide:loader-2",class:"h-5 w-5 text-white animate-spin"}),n[50]||(n[50]=t("span",{class:"text-white font-medium"},"Moving file...",-1))])):L("",!0)]),_:1}),w(He,{"enter-active-class":"transition-opacity duration-200","leave-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","leave-to-class":"opacity-0"},{default:Ve(()=>[s($e)?(u(),x("div",ao,[w(_,{name:"lucide:move",class:"h-4 w-4 text-blue-400"}),n[51]||(n[51]=t("span",{class:"text-white text-sm"},"Drop on a folder to move",-1))])):L("",!0)]),_:1}),s(C)?(u(),x("div",lo,[t("div",io,[t("div",uo,[w(xe,{class:"h-4 w-32"}),w(xe,{class:"h-4 w-20"})]),(u(),x(Se,null,Fe(5,f=>t("div",{key:f,class:"flex items-center gap-4 px-4 py-3"},[w(xe,{class:"h-10 w-10 rounded-lg shrink-0"}),t("div",co,[w(xe,{class:"h-4 w-1/3"}),w(xe,{class:"h-3 w-1/4"})]),w(xe,{class:"h-4 w-24 hidden sm:block"})])),64))])])):s(k)?(u(),x("div",po,[w(_,{name:"lucide:alert-circle",class:"h-8 w-8 mb-2 mx-auto"}),n[52]||(n[52]=t("h3",{class:"font-medium"},"Failed to load files",-1)),t("p",mo,S(s(k).message),1)])):s(T).length===0?(u(),x("div",{key:2,class:"h-full flex flex-col items-center justify-center p-12 text-center animate-in fade-in zoom-in-95 duration-500 cursor-pointer",onClick:n[7]||(n[7]=(...f)=>s(Ue)&&s(Ue)(...f))},[n[53]||(n[53]=t("div",{class:"h-32 w-32 mb-6 opacity-30"},[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1",class:"w-full h-full text-blue-300"},[t("path",{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"}),t("polyline",{points:"13 2 13 9 20 9"})])],-1)),t("h3",go,S(s(o)?"No results found":"Your folder is empty"),1),t("p",fo,S(s(o)?"Try adjusting your search terms.":"Drag and drop files here to upload, or click to browse."),1),s(o)?L("",!0):(u(),x("button",ho," Choose Files "))])):s(i)==="list"?(u(),x("div",bo,[w(Lr,{files:s(O),"selected-files":s(b),"is-all-selected":s(F),"is-partially-selected":s(P),"sort-by":s(e),"drop-target-id":s(Ge),"dragged-file":s($e),"copied-file-id":s(K),onToggleSelectAll:s(p),"onUpdate:sortBy":n[8]||(n[8]=f=>e.value=f),onRowClick:ct,onToggleFileSelection:s($),onLongPressStart:s(Je),onLongPressCancel:s(Qe),onDragStart:s(Xe),onDragEnd:s(Ye),onDragOver:s(Ze),onDragLeave:s(et),onDrop:s(tt),onAction:pt},null,8,["files","selected-files","is-all-selected","is-partially-selected","sort-by","drop-target-id","dragged-file","copied-file-id","onToggleSelectAll","onToggleFileSelection","onLongPressStart","onLongPressCancel","onDragStart","onDragEnd","onDragOver","onDragLeave","onDrop"])])):s(i)==="grid"?(u(),x("div",vo,[w(Kr,{files:s(O),"selected-files":s(b),"drop-target-id":s(Ge),"dragged-file":s($e),onRowClick:ct,onToggleFileSelection:s($),onLongPressStart:s(Je),onLongPressCancel:s(Qe),onDragStart:s(Xe),onDragEnd:s(Ye),onDragOver:s(Ze),onDragLeave:s(et),onDrop:s(tt),onAction:pt},null,8,["files","selected-files","drop-target-id","dragged-file","onToggleFileSelection","onLongPressStart","onLongPressCancel","onDragStart","onDragEnd","onDragOver","onDragLeave","onDrop"])])):L("",!0),s(m)>1?(u(),x("div",xo,[t("div",yo,[t("button",{onClick:n[9]||(n[9]=f=>d.value--),disabled:s(d)===1,class:"h-8 w-8 flex items-center justify-center rounded-full hover:bg-background disabled:opacity-50 transition-all text-muted-foreground"},[w(_,{name:"lucide:chevron-left",class:"h-4 w-4"})],8,wo),t("div",ko," Page "+S(s(d))+" of "+S(s(m)),1),t("button",{onClick:n[10]||(n[10]=f=>d.value++),disabled:s(d)===s(m),class:"h-8 w-8 flex items-center justify-center rounded-full hover:bg-background disabled:opacity-50 transition-all text-muted-foreground"},[w(_,{name:"lucide:chevron-right",class:"h-4 w-4"})],8,$o)])])):L("",!0)])]),(u(),A(De,{to:"body"},[s(ae)?(u(),x("div",{key:0,class:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-[#1E1919]/60 backdrop-blur-[2px]",onClick:n[23]||(n[23]=q((...f)=>s(ve)&&s(ve)(...f),["self"]))},[t("div",_o,[t("div",Do,[n[54]||(n[54]=t("h3",{class:"font-semibold text-lg text-[#1E1919] dark:text-foreground"},"Share details",-1)),t("button",{onClick:n[11]||(n[11]=(...f)=>s(ve)&&s(ve)(...f)),class:"p-1 rounded-full hover:bg-muted text-muted-foreground transition-colors"},[w(_,{name:"lucide:x",class:"h-5 w-5"})])]),t("div",Co,[t("div",So,[t("div",{class:X(["h-12 w-12 rounded-lg flex items-center justify-center shrink-0",s(Ce)(s(ae).extension)])},[w(_,{name:s(fe)(s(ae).extension),class:"h-6 w-6"},null,8,["name"])],2),t("div",Fo,[t("h4",Eo,S(s(ae).name),1),t("div",zo,[t("span",null,S(s(ie)(s(ae).size)),1),n[55]||(n[55]=t("span",null,"â€¢",-1)),t("span",null,"Last modified "+S(s(Pe)(s(ae).modified)),1)])])]),s(pe)?(u(),x("div",Bo,[t("div",To,[t("div",Lo,[w(_,{name:"lucide:check-circle-2",class:"h-5 w-5 text-green-600"})]),n[56]||(n[56]=t("div",null,[t("p",{class:"text-sm font-medium text-green-800 dark:text-green-300"},"Link created"),t("p",{class:"text-xs text-green-600 dark:text-green-400 mt-0.5"},"Anyone with this link can view this file.")],-1))]),t("div",Po,[t("button",{onClick:n[12]||(n[12]=f=>_e.value="link"),class:X(["px-4 py-2 text-sm font-medium border-b-2 transition-colors focus:outline-none",s(_e)==="link"?"border-[#0061FE] text-[#0061FE]":"border-transparent text-muted-foreground hover:text-foreground"])}," Share Link ",2),t("button",{onClick:n[13]||(n[13]=f=>_e.value="embed"),class:X(["px-4 py-2 text-sm font-medium border-b-2 transition-colors focus:outline-none",s(_e)==="embed"?"border-[#0061FE] text-[#0061FE]":"border-transparent text-muted-foreground hover:text-foreground"])}," Embed Code ",2)]),s(_e)==="link"?(u(),x("div",Ao,[n[57]||(n[57]=t("label",{class:"text-xs font-bold uppercase text-muted-foreground tracking-wider"},"Link to file",-1)),t("div",Mo,[t("div",jo,[t("input",{type:"text",value:s(pe).url,readonly:"",class:"w-full h-11 pl-3 pr-10 bg-muted/30 border rounded-md text-sm font-mono text-foreground focus:ring-2 focus:ring-blue-500/20 outline-none transition-all"},null,8,Oo)]),t("button",{onClick:n[14]||(n[14]=(...f)=>s(dt)&&s(dt)(...f)),class:"h-11 px-6 rounded-md bg-primary hover:bg-primary/90 text-primary-foreground font-medium text-sm transition-colors flex items-center gap-2"},[s(Le)?(u(),A(_,{key:0,name:"lucide:check",class:"h-4 w-4"})):(u(),A(_,{key:1,name:"lucide:copy",class:"h-4 w-4"})),ee(" "+S(s(Le)?"Copied":"Copy"),1)])])])):(u(),x("div",Io,[t("div",Uo,[n[58]||(n[58]=t("label",{class:"text-xs font-bold uppercase text-muted-foreground tracking-wider"},"Embed URL",-1)),t("div",Ro,[t("input",{type:"text",readonly:"",value:s(zt)(s(pe).id),class:"flex-1 h-10 px-3 bg-muted/30 border rounded-md text-xs font-mono text-foreground focus:ring-2 focus:ring-blue-500/20 outline-none"},null,8,No),t("button",{onClick:n[15]||(n[15]=f=>s(Tt)(s(pe).id)),class:"h-10 px-4 rounded-md bg-muted hover:bg-muted/80 text-foreground font-medium text-sm transition-colors flex items-center gap-2 border"},[s(Le)?(u(),A(_,{key:0,name:"lucide:check",class:"h-4 w-4 text-green-500"})):(u(),A(_,{key:1,name:"lucide:link",class:"h-4 w-4"}))])]),n[59]||(n[59]=t("p",{class:"text-xs text-muted-foreground"},"Use this URL directly in your video player.",-1))]),t("div",Vo,[n[60]||(n[60]=t("label",{class:"text-xs font-bold uppercase text-muted-foreground tracking-wider"},"iFrame Code",-1)),t("div",Ho,[t("textarea",{readonly:"",value:s(Et)(s(pe).id),class:"w-full h-20 p-3 bg-muted/50 border rounded-md text-xs font-mono text-foreground resize-none focus:ring-2 focus:ring-blue-500/20 outline-none transition-all"},null,8,qo),t("button",{onClick:n[16]||(n[16]=f=>s(Bt)(s(pe).id)),class:"absolute top-2 right-2 p-1.5 bg-background shadow-sm border rounded hover:bg-muted text-[#0061FE] transition-all opacity-0 group-hover:opacity-100",title:"Copy Code"},[s(Le)?(u(),A(_,{key:0,name:"lucide:check",class:"h-4 w-4"})):(u(),A(_,{key:1,name:"lucide:copy",class:"h-4 w-4"}))])]),n[61]||(n[61]=t("p",{class:"text-xs text-muted-foreground"},"Paste this code into your website's HTML.",-1))])])),t("div",Ko,[s(at)?(u(),x("div",Wo,[n[63]||(n[63]=t("p",{class:"text-sm text-red-800 dark:text-red-200 font-medium mb-2"},"Delete this share link?",-1)),n[64]||(n[64]=t("p",{class:"text-xs text-red-600 dark:text-red-400 mb-3"},"Anyone with this link will no longer be able to access the file.",-1)),t("div",Go,[t("button",{onClick:n[17]||(n[17]=f=>s(ut)(s(z))),disabled:s(nt),class:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2"},[s(nt)?(u(),A(_,{key:0,name:"lucide:loader-2",class:"h-4 w-4 animate-spin"})):(u(),A(_,{key:1,name:"lucide:trash-2",class:"h-4 w-4"})),n[62]||(n[62]=ee(" Yes, Delete ",-1))],8,Jo),t("button",{onClick:n[18]||(n[18]=f=>at.value=!1),class:"px-4 py-2 bg-white dark:bg-gray-800 border text-gray-700 dark:text-gray-200 text-sm font-medium rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"}," Cancel ")])])):(u(),x("div",Qo,[t("span",Xo,[n[65]||(n[65]=ee("Expires: ",-1)),t("span",Yo,S(At(s(pe).expiresAt)),1)]),t("div",Zo,[t("button",{onClick:n[19]||(n[19]=f=>s(ut)(s(z))),class:"text-sm text-red-500 hover:text-red-600 hover:underline flex items-center gap-1"},[w(_,{name:"lucide:trash-2",class:"h-3 w-3"}),n[66]||(n[66]=ee(" Delete Link ",-1))]),t("button",{onClick:n[20]||(n[20]=(...f)=>s(ve)&&s(ve)(...f)),class:"text-sm text-muted-foreground hover:text-foreground hover:underline"},"Done")])]))])])):(u(),x("div",en,[t("div",tn,[t("div",sn,[t("div",rn,[w(_,{name:"lucide:code",class:"h-4 w-4"})]),n[68]||(n[68]=t("div",{class:"flex-1 min-w-0"},[t("p",{class:"text-sm font-medium text-purple-900 dark:text-purple-200"},"Quick Embed"),t("p",{class:"text-xs text-purple-600 dark:text-purple-400 mt-0.5"},"Get embed code instantly (link never expires)")],-1)),t("button",{onClick:n[21]||(n[21]=f=>s(ae)&&s(Ft)(s(ae))),disabled:s(ot),class:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white text-sm font-medium rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2"},[s(ot)?(u(),A(_,{key:0,name:"lucide:loader-2",class:"h-4 w-4 animate-spin"})):(u(),A(_,{key:1,name:"lucide:sparkles",class:"h-4 w-4"})),n[67]||(n[67]=ee(" Generate ",-1))],8,on)])]),n[71]||(n[71]=t("div",{class:"relative flex items-center"},[t("div",{class:"flex-grow border-t border-border"}),t("span",{class:"px-3 text-xs text-muted-foreground"},"or create link with expiration"),t("div",{class:"flex-grow border-t border-border"})],-1)),t("div",null,[n[70]||(n[70]=t("label",{class:"text-sm font-medium text-foreground mb-3 block"},"Link settings",-1)),t("div",nn,[t("div",an,[t("div",ln,[w(_,{name:"lucide:clock",class:"h-4 w-4"})]),n[69]||(n[69]=t("div",null,[t("p",{class:"text-sm font-medium"},"Expiration"),t("p",{class:"text-xs text-muted-foreground"},"When should this link expire?")],-1))]),t("div",dn,[(u(!0),x(Se,null,Fe(s(St),f=>(u(),x("button",{key:f.label,onClick:la=>Ne.value=f.days,class:X(["px-3 py-2.5 rounded-lg text-sm font-medium transition-all border text-left flex items-center justify-between",s(Ne)===f.days?"bg-blue-50 border-blue-200 text-blue-700 ring-1 ring-blue-200":"bg-card hover:bg-muted border-input text-muted-foreground hover:text-foreground"])},[ee(S(f.label)+" ",1),s(Ne)===f.days?(u(),A(_,{key:0,name:"lucide:check",class:"h-4 w-4"})):L("",!0)],10,un))),128))])])]),t("button",{onClick:n[22]||(n[22]=(...f)=>s(it)&&s(it)(...f)),disabled:s(rt),class:"w-full h-12 rounded-lg bg-primary hover:bg-primary/90 text-primary-foreground font-semibold text-base shadow-sm transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed mt-4"},[s(rt)?(u(),A(_,{key:0,name:"lucide:loader-2",class:"h-5 w-5 animate-spin"})):(u(),x("span",pn,"Create Link"))],8,cn)]))])])])):L("",!0)])),(u(),A(De,{to:"body"},[s(G)?(u(),x("div",{key:0,class:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-[#1E1919]/60 backdrop-blur-[2px]",onClick:n[26]||(n[26]=q(f=>G.value=null,["self"]))},[t("div",mn,[t("div",gn,[t("div",fn,[w(_,{name:"lucide:trash-2",class:"h-5 w-5 text-red-600"})]),n[72]||(n[72]=t("h3",{class:"font-semibold text-lg text-[#1E1919] dark:text-foreground"},"Delete File",-1))]),t("div",hn,[n[74]||(n[74]=t("p",{class:"text-muted-foreground mb-2"}," Are you sure you want to delete this file? ",-1)),t("div",bn,[w(_,{name:s(fe)(s(G).extension),class:X(["h-8 w-8",s(Ce)(s(G).extension)])},null,8,["name","class"]),t("div",vn,[t("p",xn,S(s(G).name),1),t("p",yn,S(s(ie)(s(G).size)),1)])]),n[75]||(n[75]=t("p",{class:"text-xs text-muted-foreground mb-6"}," The file will be moved to trash and automatically deleted after 30 days. ",-1)),t("div",wn,[t("button",{onClick:n[24]||(n[24]=f=>G.value=null),class:"px-4 py-2 rounded-lg text-sm font-medium border border-input bg-background hover:bg-muted transition-colors"}," Cancel "),t("button",{onClick:n[25]||(n[25]=(...f)=>s(Q)&&s(Q)(...f)),disabled:s(Z),class:"px-4 py-2 rounded-lg text-sm font-medium bg-red-600 text-white hover:bg-red-700 transition-colors flex items-center gap-2 disabled:opacity-50"},[s(Z)?(u(),A(_,{key:0,name:"lucide:loader-2",class:"h-4 w-4 animate-spin"})):(u(),A(_,{key:1,name:"lucide:trash-2",class:"h-4 w-4"})),n[73]||(n[73]=ee(" Delete ",-1))],8,kn)])])])])):L("",!0)])),(u(),A(De,{to:"body"},[s(H)?(u(),x("div",{key:0,class:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/90",onClick:n[34]||(n[34]=q((...f)=>s(ce)&&s(ce)(...f),["self"]))},[t("button",{onClick:n[27]||(n[27]=(...f)=>s(ce)&&s(ce)(...f)),class:"absolute top-4 right-4 z-10 h-10 w-10 flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 text-white transition-colors"},[w(_,{name:"lucide:x",class:"h-6 w-6"})]),t("div",$n,[w(_,{name:s(fe)(s(H).extension),class:"h-8 w-8 text-white shrink-0"},null,8,["name"]),t("div",_n,[t("p",Dn,S(s(H).name),1),t("p",Cn,S(s(ie)(s(H).size)),1)])]),t("div",Sn,[t("button",{onClick:n[28]||(n[28]=f=>s(R)(s(H))),class:"px-4 py-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-colors flex items-center gap-2"},[w(_,{name:"lucide:download",class:"h-4 w-4"}),n[76]||(n[76]=ee(" Download ",-1))]),t("button",{onClick:n[29]||(n[29]=f=>{s(lt)(s(H)),s(ce)()}),class:"px-4 py-2 rounded-lg bg-[#0061FE] hover:bg-[#0057E5] text-white transition-colors flex items-center gap-2"},[w(_,{name:"lucide:share-2",class:"h-4 w-4"}),n[77]||(n[77]=ee(" Share ",-1))])]),t("div",Fn,[s(Dt)?(u(),x("div",En,[w(_,{name:"lucide:loader-2",class:"h-12 w-12 animate-spin"}),n[78]||(n[78]=t("p",null,"Loading preview...",-1))])):L("",!0),s(st)?(u(),x("div",zn,[t("div",Bn,[w(_,{name:"lucide:alert-circle",class:"h-10 w-10"})]),n[79]||(n[79]=t("p",{class:"font-medium text-lg mb-2 text-foreground"},"Failed to load preview",-1)),t("p",Tn,S(s(st)),1),t("div",Ln,[t("button",{onClick:n[30]||(n[30]=(...f)=>s(ce)&&s(ce)(...f)),class:"px-4 py-2 rounded-lg bg-muted hover:bg-muted/80 text-foreground transition-colors"}," Close "),t("button",{onClick:n[31]||(n[31]=f=>s(H)&&s(Re)(s(H))),class:"px-4 py-2 rounded-lg bg-primary hover:bg-primary/90 text-primary-foreground transition-colors"}," Retry ")])])):s(ds)(s(H).extension)?(u(),x("div",Pn,[t("div",An,[w(_,{name:"lucide:package",class:"h-10 w-10"})]),t("p",Mn,S(s(H).name),1),n[81]||(n[81]=t("p",{class:"text-muted-foreground text-sm mb-6"},"Archive files cannot be previewed directly.",-1)),t("button",{onClick:n[32]||(n[32]=f=>s(R)(s(H))),class:"px-6 py-2 rounded-lg bg-primary hover:bg-primary/90 text-primary-foreground transition-colors flex items-center gap-2 mx-auto"},[w(_,{name:"lucide:download",class:"h-4 w-4"}),n[80]||(n[80]=ee(" Download to View ",-1))])])):s(ne)&&s(us)(s(H).extension)?(u(),x("img",{key:3,src:s(ne),alt:s(H).name,class:"max-w-full max-h-[80vh] object-contain rounded-lg shadow-2xl"},null,8,jn)):s(ne)&&s(xt)(s(H).extension)?(u(),x("video",{key:4,src:s(ne),controls:"",autoplay:"",class:"max-w-full max-h-[80vh] rounded-lg shadow-2xl"},null,8,On)):s(ne)&&s(cs)(s(H).extension)?(u(),x("div",In,[w(_,{name:s(fe)(s(H).extension),class:"h-24 w-24 mx-auto mb-4 text-indigo-500"},null,8,["name"]),t("p",Un,S(s(H).name),1),t("audio",{src:s(ne),controls:"",autoplay:"",class:"w-full max-w-md"},null,8,Rn)])):s(ne)?(u(),x("div",Nn,[t("div",{class:X(["h-20 w-20 mx-auto mb-6 rounded-2xl flex items-center justify-center",s(Ce)(s(H).extension)])},[w(_,{name:s(fe)(s(H).extension),class:"h-10 w-10"},null,8,["name"])],2),t("p",Vn,S(s(H).name),1),t("p",Hn,S(s(ie)(s(H).size)),1),n[82]||(n[82]=t("p",{class:"text-sm text-muted-foreground mb-4"},"Preview not available for this file type",-1)),t("button",{onClick:n[33]||(n[33]=f=>s(Ct)(s(ne))),class:"px-6 py-2 rounded-lg bg-primary hover:bg-primary/90 text-primary-foreground transition-colors"}," Open in New Tab ")])):L("",!0)])])):L("",!0)])),(u(),A(De,{to:"body"},[s(ze)?(u(),x("div",qn,[t("div",Kn,[t("div",Wn,[t("div",Gn,[w(_,{name:"lucide:upload-cloud",class:"h-6 w-6"})]),t("div",Jn,[n[83]||(n[83]=t("h3",{class:"text-lg font-semibold text-foreground"},"Uploading Files",-1)),t("p",Qn,S(s(Me)||"Preparing..."),1)])]),t("div",Xn,[t("div",Yn,[t("div",{class:"h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-300",style:Qt({width:`${s(ke)}%`})},null,4)]),t("div",Zn,[t("span",null,S(s(je))+" of "+S(s(Oe))+" files",1),t("span",null,S(s(ke).toFixed(0))+"%",1)])]),s(Be)?(u(),x("p",ea,S(s(Be)),1)):L("",!0)])])):L("",!0)])),(u(),A(De,{to:"body"},[s(y)?(u(),x("div",{key:0,class:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-[#1E1919]/60 backdrop-blur-[2px]",onClick:n[39]||(n[39]=q(f=>y.value=!1,["self"]))},[t("div",ta,[t("div",sa,[n[84]||(n[84]=t("h3",{class:"font-semibold text-lg"},"Create new folder",-1)),t("button",{onClick:n[35]||(n[35]=f=>y.value=!1),class:"p-1 rounded-full hover:bg-muted text-muted-foreground transition-colors"},[w(_,{name:"lucide:x",class:"h-5 w-5"})])]),t("div",ra,[t("div",oa,[t("div",null,[n[85]||(n[85]=t("label",{class:"text-sm font-medium mb-1.5 block"},"Folder Name",-1)),Xt(t("input",{"onUpdate:modelValue":n[36]||(n[36]=f=>es(N)?N.value=f:null),type:"text",placeholder:"e.g. Projects",class:"w-full h-10 px-3 bg-muted/30 border rounded-md text-sm focus:ring-2 focus:ring-blue-500/20 outline-none",onKeyup:n[37]||(n[37]=Zt((...f)=>s(E)&&s(E)(...f),["enter"])),autofocus:""},null,544),[[Yt,s(N)]])]),s(re)?(u(),x("div",na,S(s(re)),1)):L("",!0),t("button",{onClick:n[38]||(n[38]=(...f)=>s(E)&&s(E)(...f)),disabled:s(I)||!s(N).trim(),class:"w-full h-10 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},[s(I)?(u(),A(_,{key:0,name:"lucide:loader-2",class:"h-4 w-4 animate-spin"})):L("",!0),n[86]||(n[86]=ee(" Create ",-1))],8,aa)])])])])):L("",!0)]))],32)}}});export{pa as default};
