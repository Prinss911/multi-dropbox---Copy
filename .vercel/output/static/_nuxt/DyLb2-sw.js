import{d as $e,r as m,h as Te,g as k,i as Ae,c as d,a as t,j as x,t as i,f as o,b as r,n as J,v as Me,p as W,y as me,F as X,k as ee,s as S,l as b,w as Be,z as Ue,m as V,e as $,_ as Le,T as O,o as a,x as pe,A as Ne}from"./D0_loxAU.js";import{u as Pe}from"./CxRmHzWs.js";const Re={class:"h-full flex flex-col bg-background/50"},Ve={class:"sticky top-0 z-20 bg-background/95 backdrop-blur border-b px-6 py-4"},Oe={class:"w-full"},qe={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},Ge={class:"text-sm text-muted-foreground"},Ye={class:"flex flex-wrap items-center gap-3"},Ke={class:"relative group"},Qe={class:"relative"},Ze=["value"],He={class:"relative"},Je=["disabled"],We={class:"flex-1 overflow-auto px-4 md:px-6 py-6 transition-all"},Xe={class:"w-full h-full"},et={key:0,class:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 flex items-center gap-3 px-5 py-3 bg-[#1E1919] dark:bg-card rounded-full shadow-2xl border dark:border-border"},tt={class:"flex items-center gap-2 text-white dark:text-foreground"},st={class:"h-7 w-7 rounded-full bg-blue-600 flex items-center justify-center text-sm font-bold"},ot=["disabled"],lt=["disabled"],nt={key:0,class:"h-full flex flex-col items-center justify-center text-muted-foreground"},at={key:1,class:"p-6 rounded-lg bg-red-50 text-red-600 border border-red-100 text-center mx-auto max-w-lg mt-10"},it={class:"text-sm opacity-80 mt-1"},rt={key:2,class:"h-full flex flex-col items-center justify-center p-12 text-center"},dt={class:"h-24 w-24 mb-4 flex items-center justify-center rounded-full bg-muted/30 text-muted-foreground"},ct={class:"text-muted-foreground text-sm max-w-xs"},ut={key:3,class:"w-full pb-8"},mt={class:"w-full text-left border-collapse"},pt={class:"sticky top-0 bg-background/95 backdrop-blur z-10"},xt={class:"py-3 px-2 border-b w-10"},ht=["checked","indeterminate"],ft={class:"divide-y divide-border/40"},gt={class:"py-3 px-2"},bt=["checked","onChange"],vt={class:"py-3 px-4"},wt={class:"flex items-center gap-4"},yt={class:"relative shrink-0"},kt={class:"min-w-0"},_t=["onClick","title"],Ct={class:"flex items-center gap-2 mt-0.5 lg:hidden"},Ft={class:"text-xs text-muted-foreground"},St={class:"py-3 px-4 hidden sm:table-cell"},zt={class:"truncate max-w-[120px]"},Dt={class:"py-3 px-4 text-sm text-muted-foreground hidden md:table-cell"},Et={class:"flex items-center gap-1.5 max-w-[200px]"},jt=["title"],It={class:"py-3 px-4 text-xs font-mono text-muted-foreground hidden lg:table-cell"},$t={class:"py-3 px-4 text-xs text-muted-foreground hidden xl:table-cell"},Tt={class:"py-3 px-4 text-right"},At={class:"flex items-center justify-end gap-1 opacity-100 sm:opacity-0 group-hover:opacity-100 transition-opacity"},Mt=["onClick"],Bt=["onClick"],Ut=["onClick"],Lt=["onClick"],Nt={key:4,class:"flex justify-center mt-4 pb-8"},Pt={class:"flex items-center gap-1 bg-muted/30 p-1 rounded-full"},Rt=["disabled"],Vt={class:"px-4 text-xs font-medium text-muted-foreground"},Ot=["disabled"],qt={class:"bg-card w-full max-w-[480px] rounded-xl shadow-2xl border-0 overflow-hidden animate-in fade-in zoom-in-95 duration-200"},Gt={class:"px-6 py-5 border-b bg-background flex items-center justify-between"},Yt={class:"p-6"},Kt={class:"flex items-center gap-4 mb-6"},Qt={class:"h-10 w-10 flex items-center justify-center"},Zt={class:"min-w-0"},Ht={class:"font-medium text-sm truncate"},Jt={class:"flex text-xs text-muted-foreground gap-2"},Wt={class:"text-[#0061FE]"},Xt={key:0,class:"space-y-5"},es={class:"p-4 bg-green-50 dark:bg-green-900/10 rounded-lg flex gap-3 border border-green-100 dark:border-green-800/30"},ts={class:"mt-0.5"},ss={class:"text-xs text-green-600 dark:text-green-400 mt-0.5"},os={class:"space-y-2"},ls={class:"flex gap-2"},ns={class:"flex-1 relative"},as=["value"],is={key:1,class:"space-y-6"},rs={class:"grid grid-cols-2 gap-2"},ds=["onClick"],cs=["disabled"],us={key:1},ms={class:"bg-card w-full max-w-[400px] rounded-xl shadow-2xl border-0 overflow-hidden animate-in fade-in zoom-in-95 duration-200"},ps={class:"px-6 py-5 border-b bg-background flex items-center gap-3"},xs={class:"p-2 rounded-full bg-red-100"},hs={class:"p-6"},fs={class:"flex items-center gap-3 p-3 bg-muted/30 rounded-lg mb-4"},gs={class:"min-w-0"},bs={class:"font-medium text-sm truncate"},vs={class:"text-xs text-muted-foreground"},ws={class:"flex gap-3 justify-end"},ys=["disabled"],ks={class:"absolute top-4 left-4 z-10 flex items-center gap-3 max-w-[50%]"},_s={class:"min-w-0"},Cs={class:"text-white font-medium truncate"},Fs={class:"text-white/60 text-sm"},Ss={class:"absolute bottom-4 left-1/2 -translate-x-1/2 z-10 flex gap-2"},zs={class:"max-w-[90vw] max-h-[80vh] flex items-center justify-center"},Ds={key:0,class:"flex flex-col items-center gap-4 text-white"},Es=["src","alt"],js=["src"],Is={key:3,class:"bg-card p-8 rounded-xl shadow-2xl text-center"},$s={class:"font-medium text-lg mb-4"},Ts=["src"],As={key:4,class:"bg-card p-8 rounded-xl shadow-2xl text-center max-w-md"},Ms={class:"font-medium text-lg mb-2"},Bs={class:"text-muted-foreground text-sm mb-6"},Us={class:"bg-card w-full max-w-[400px] rounded-xl shadow-2xl border-0 overflow-hidden animate-in fade-in zoom-in-95 duration-200 p-6"},Ls={class:"flex flex-col items-center text-center gap-4"},Ns={class:"h-12 w-12 rounded-full bg-red-50 flex items-center justify-center text-red-600 mb-2"},Ps={class:"text-lg font-semibold text-[#1E1919] dark:text-foreground"},Rs={class:"flex gap-3 w-full mt-2"},Vs=["disabled"],te=50,Ys=$e({__name:"files",setup(Os){const v=m(""),w=m(""),z=m("modified"),C=m(1),{authFetch:_}=Pe(),T=m(null),D=m(!0),U=m(null),se=async()=>{D.value=!0,U.value=null;try{const s=await _("/api/dropbox/all-files");T.value=s}catch(s){console.error("Failed to fetch files:",s),U.value=s}finally{D.value=!1}},q=()=>se();Te(()=>{se()});const G=k(()=>{var s;return((s=T.value)==null?void 0:s.files)||[]}),oe=k(()=>{var s;return((s=T.value)==null?void 0:s.accounts)||[]}),xe=k(()=>{var s;return((s=T.value)==null?void 0:s.totalFiles)||0}),he=k(()=>{var s;return((s=T.value)==null?void 0:s.totalAccounts)||0}),c=m(new Set),L=m(!1),A=m(!1),N=m(!1),le=k(()=>F.value.length>0&&F.value.every(s=>c.value.has(s.id))),fe=k(()=>{const s=F.value.filter(e=>c.value.has(e.id)).length;return s>0&&s<F.value.length}),ge=s=>{const e=new Set(c.value);e.has(s)?e.delete(s):e.add(s),c.value=e},be=()=>{if(le.value){const s=new Set(c.value);F.value.forEach(e=>s.delete(e.id)),c.value=s}else{const s=new Set(c.value);F.value.forEach(e=>s.add(e.id)),c.value=s}},ve=()=>{c.value=new Set},Y=k(()=>{let s=[...G.value];if(v.value){const e=v.value.toLowerCase();s=s.filter(n=>n.name.toLowerCase().includes(e)||n.path.toLowerCase().includes(e))}return w.value&&(s=s.filter(e=>e.accountId===w.value)),z.value==="name"?s.sort((e,n)=>e.name.localeCompare(n.name)):z.value==="size"?s.sort((e,n)=>n.size-e.size):s.sort((e,n)=>new Date(n.modified).getTime()-new Date(e.modified).getTime()),s}),K=k(()=>Math.ceil(Y.value.length/te)),F=k(()=>{const s=(C.value-1)*te;return Y.value.slice(s,s+te)});Ae([v,w,z],()=>{C.value=1});const we=s=>{const e=s.split("/");return e.pop(),e.join("/")||"/"},ne=async s=>{try{const e=await _(`/api/dropbox/download?path=${encodeURIComponent(s.path)}&accountId=${encodeURIComponent(s.accountId)}`);window.open(e.link,"_blank")}catch(e){alert("Download failed: "+e.message)}},h=m(null),y=m(null),P=m(!1),M=m(!1),ye=[{days:1,unit:"days",label:"1 Day"},{days:3,unit:"days",label:"3 Days"},{days:7,unit:"days",label:"7 Days"},{days:30,unit:"days",label:"1 Month"},{days:90,unit:"days",label:"3 Months"},{days:"never",unit:"days",label:"Never"}],B=m(7),ae=m("days"),ie=s=>{h.value=s,y.value=null,M.value=!1,B.value=7},re=()=>{h.value=null,y.value=null},ke=async()=>{var s,e,n;if(console.log("[handleShare] Called, shareTarget:",h.value),!h.value){console.error("[handleShare] No shareTarget!");return}P.value=!0,console.log("[handleShare] Starting share request...");try{const l={accountId:h.value.accountId,filePath:h.value.path,fileName:h.value.name,expirationDays:B.value,expirationUnit:ae.value};console.log("[handleShare] Request body:",l);const u=await _("/api/shares/create",{method:"POST",body:l});console.log("[handleShare] Response:",u),(s=u==null?void 0:u.share)!=null&&s.url?(y.value={url:u.share.url,expiresAt:u.share.expiresAt},console.log("[handleShare] Share created successfully:",y.value)):(console.error("[handleShare] Invalid response structure:",u),alert("Failed to create share link: Invalid response from server"))}catch(l){console.error("[handleShare] Error:",l);const u=((e=l.data)==null?void 0:e.message)||((n=l.data)==null?void 0:n.statusMessage)||l.message||"Unknown error";alert("Failed to create share link: "+u)}finally{P.value=!1}},_e=async()=>{y.value&&(await navigator.clipboard.writeText(y.value.url),M.value=!0,setTimeout(()=>M.value=!1,2e3))},Ce=s=>s?new Date(s).toLocaleDateString("id-ID",{weekday:"short",day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Never",E=s=>{if(!s||s===0)return"-";const e=1024,n=["B","KB","MB","GB","TB"],l=Math.floor(Math.log(s)/Math.log(e));return parseFloat((s/Math.pow(e,l)).toFixed(1))+" "+n[l]},Fe=s=>s?new Date(s).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",j=s=>s&&{png:"lucide:image",jpg:"lucide:image",jpeg:"lucide:image",gif:"lucide:image",webp:"lucide:image",pdf:"lucide:file-text",doc:"lucide:file-text",docx:"lucide:file-text",xls:"lucide:file-spreadsheet",xlsx:"lucide:file-spreadsheet",mp4:"lucide:file-video",mkv:"lucide:file-video",avi:"lucide:file-video",mov:"lucide:file-video",mp3:"lucide:file-audio",wav:"lucide:file-audio",flac:"lucide:file-audio",zip:"lucide:file-archive",rar:"lucide:file-archive","7z":"lucide:file-archive"}[s]||"lucide:file",R=s=>({pdf:"text-red-600",doc:"text-blue-600",docx:"text-blue-600",xls:"text-green-600",xlsx:"text-green-600",jpg:"text-purple-600",jpeg:"text-purple-600",png:"text-purple-600",gif:"text-purple-600",webp:"text-purple-600",mp4:"text-pink-600",mkv:"text-pink-600",avi:"text-pink-600",mov:"text-pink-600",mp3:"text-indigo-600",wav:"text-indigo-600",flac:"text-indigo-600",zip:"text-amber-600",rar:"text-amber-600","7z":"text-amber-600"})[s||""]||"text-gray-600",de=["#0061FE","#0070E0","#007EE5","#248CF2","#4D9BF7","#76ABFC"],Q=s=>{const e=oe.value.findIndex(n=>n.id===s);return de[e%de.length]},f=m(null),I=m(!1),Se=s=>{f.value=s},ze=async()=>{var s;if(f.value){I.value=!0;try{await _("/api/dropbox/delete",{method:"POST",body:{path:f.value.path,accountId:f.value.accountId}}),await q(),f.value=null}catch(e){console.error("Delete failed:",e),alert("Failed to delete file: "+(((s=e.data)==null?void 0:s.message)||e.message||"Unknown error"))}finally{I.value=!1}}},p=m(null),g=m(null),Z=m(!1),ce=async s=>{var e;p.value=s,g.value=null,Z.value=!0;try{const n=await _(`/api/dropbox/download?path=${encodeURIComponent(s.path)}&accountId=${encodeURIComponent(s.accountId)}`);g.value=n.link}catch(n){console.error("Failed to get preview URL:",n),alert("Failed to load preview: "+(((e=n.data)==null?void 0:e.message)||n.message||"Unknown error")),p.value=null}finally{Z.value=!1}},H=()=>{p.value=null,g.value=null},De=s=>s?["jpg","jpeg","png","gif","webp","bmp","svg"].includes(s.toLowerCase()):!1,Ee=s=>s?["mp4","mkv","avi","mov","webm","wmv","flv"].includes(s.toLowerCase()):!1,je=s=>s?["mp3","wav","flac","aac","ogg","m4a","wma"].includes(s.toLowerCase()):!1,ue=async()=>{if(c.value.size===0)return;A.value=!0;const s=Array.from(c.value);let e=0;for(const n of s){const l=G.value.find(u=>u.id===n);if(l)try{await _("/api/dropbox/delete",{method:"POST",body:{path:l.path,accountId:l.accountId}}),e++}catch(u){console.error(`Failed to delete ${l.name}:`,u)}}c.value=new Set,L.value=!1,A.value=!1,e>0&&await q()},Ie=async()=>{if(c.value.size!==0){N.value=!0;try{const s=G.value.filter(e=>c.value.has(e.id));if(s.length===1){const e=s[0],n=await _(`/api/dropbox/download?path=${encodeURIComponent(e.path)}&accountId=${encodeURIComponent(e.accountId)}`);window.open(n.link,"_blank")}else for(const e of s)try{const n=await _(`/api/dropbox/download?path=${encodeURIComponent(e.path)}&accountId=${encodeURIComponent(e.accountId)}`),l=document.createElement("a");l.href=n.link,l.download=e.name,l.target="_blank",document.body.appendChild(l),l.click(),document.body.removeChild(l),await new Promise(u=>setTimeout(u,300))}catch(n){console.error(`Failed to download ${e.name}:`,n)}c.value=new Set}catch(s){console.error("Bulk download error:",s),alert("Failed to download files: "+(s.message||"Unknown error"))}finally{N.value=!1}}};return(s,e)=>{const n=Le;return a(),d("div",Re,[t("div",Ve,[t("div",Oe,[t("div",qe,[t("div",null,[e[14]||(e[14]=t("h1",{class:"text-xl font-semibold text-[#1E1919] dark:text-foreground"},"All Files",-1)),t("p",Ge,i(o(c).size>0?`${o(c).size} selected`:`${o(xe)} files across ${o(he)} accounts`),1)]),t("div",Ye,[t("div",Ke,[r(n,{name:"lucide:search",class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground group-focus-within:text-primary transition-colors"}),J(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>W(v)?v.value=l:null),type:"text",placeholder:"Search files...",class:"h-10 pl-9 pr-4 w-full md:w-64 rounded-full border bg-muted/20 hover:bg-muted/40 focus:bg-background focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all text-sm"},null,512),[[Me,o(v)]])]),e[17]||(e[17]=t("div",{class:"h-6 w-px bg-border mx-1 hidden md:block"},null,-1)),t("div",Qe,[J(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>W(w)?w.value=l:null),class:"h-10 pl-3 pr-8 rounded-full border bg-muted/20 hover:bg-muted/40 text-sm focus:ring-2 focus:ring-blue-500/20 outline-none appearance-none cursor-pointer min-w-[140px]"},[e[15]||(e[15]=t("option",{value:""},"All Accounts",-1)),(a(!0),d(X,null,ee(o(oe),l=>(a(),d("option",{key:l.id,value:l.id},i(l.name),9,Ze))),128))],512),[[me,o(w)]]),r(n,{name:"lucide:chevron-down",class:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"})]),t("div",He,[J(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>W(z)?z.value=l:null),class:"h-10 pl-3 pr-8 rounded-full border bg-muted/20 hover:bg-muted/40 text-sm focus:ring-2 focus:ring-blue-500/20 outline-none appearance-none cursor-pointer"},[...e[16]||(e[16]=[t("option",{value:"modified"},"Date Modified",-1),t("option",{value:"name"},"Name (A-Z)",-1),t("option",{value:"size"},"File Size",-1)])],512),[[me,o(z)]]),r(n,{name:"lucide:arrow-up-down",class:"absolute right-3 top-1/2 -translate-y-1/2 h-3 w-3 text-muted-foreground pointer-events-none"})]),t("button",{onClick:e[3]||(e[3]=()=>q()),disabled:o(D),class:"h-10 w-10 flex items-center justify-center rounded-full hover:bg-muted transition-colors text-muted-foreground"},[r(n,{name:o(D)?"lucide:loader-2":"lucide:refresh-cw",class:S([{"animate-spin":o(D)},"h-4 w-4"])},null,8,["name","class"])],8,Je)])])])]),t("div",We,[t("div",Xe,[r(Ue,{"enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in","enter-from-class":"opacity-0 translate-y-4","leave-to-class":"opacity-0 translate-y-4"},{default:Be(()=>[o(c).size>0?(a(),d("div",et,[t("div",tt,[t("div",st,i(o(c).size),1),e[18]||(e[18]=t("span",{class:"text-sm font-medium"},"selected",-1))]),e[21]||(e[21]=t("div",{class:"w-px h-6 bg-white/20 dark:bg-border"},null,-1)),t("button",{onClick:Ie,disabled:o(N),class:"flex items-center gap-2 px-4 py-2 rounded-full bg-white/10 hover:bg-white/20 text-white text-sm font-medium transition-colors disabled:opacity-50"},[o(N)?(a(),x(n,{key:0,name:"lucide:loader-2",class:"h-4 w-4 animate-spin"})):(a(),x(n,{key:1,name:"lucide:download",class:"h-4 w-4"})),e[19]||(e[19]=t("span",{class:"hidden sm:inline"},"Download",-1))],8,ot),t("button",{onClick:ue,disabled:o(I),class:"flex items-center gap-2 px-4 py-2 rounded-full bg-red-500/20 hover:bg-red-500/30 text-red-400 text-sm font-medium transition-colors disabled:opacity-50"},[o(I)?(a(),x(n,{key:0,name:"lucide:loader-2",class:"h-4 w-4 animate-spin"})):(a(),x(n,{key:1,name:"lucide:trash-2",class:"h-4 w-4"})),e[20]||(e[20]=t("span",{class:"hidden sm:inline"},"Delete",-1))],8,lt),e[22]||(e[22]=t("div",{class:"w-px h-6 bg-white/20 dark:bg-border"},null,-1)),t("button",{onClick:ve,class:"p-2 rounded-full hover:bg-white/10 text-white/60 hover:text-white transition-colors",title:"Clear selection"},[r(n,{name:"lucide:x",class:"h-4 w-4"})])])):b("",!0)]),_:1}),o(D)?(a(),d("div",nt,[r(n,{name:"lucide:loader-2",class:"animate-spin h-8 w-8 text-[#0061FE] mb-4"}),e[23]||(e[23]=t("p",{class:"text-sm"},"Fetching files list...",-1))])):o(U)?(a(),d("div",at,[r(n,{name:"lucide:alert-circle",class:"h-8 w-8 mb-2 mx-auto"}),e[24]||(e[24]=t("h3",{class:"font-medium"},"Failed to load files",-1)),t("p",it,i(o(U).message),1)])):o(Y).length===0?(a(),d("div",rt,[t("div",dt,[r(n,{name:"lucide:search-x",class:"h-10 w-10 opacity-50"})]),e[25]||(e[25]=t("h3",{class:"text-lg font-semibold text-[#1E1919] dark:text-foreground mb-2"},"No files found",-1)),t("p",ct,i(o(v)||o(w)?"No matches for your filters.":"Your storage is completely empty."),1),o(v)||o(w)?(a(),d("button",{key:0,onClick:e[4]||(e[4]=l=>{v.value="",w.value=""}),class:"mt-4 text-[#0061FE] text-sm hover:underline"}," Clear all filters ")):b("",!0)])):(a(),d("div",ut,[t("table",mt,[t("thead",pt,[t("tr",null,[t("th",xt,[t("input",{type:"checkbox",checked:o(le),indeterminate:o(fe),onChange:be,class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"},null,40,ht)]),e[26]||(e[26]=t("th",{class:"py-3 px-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider border-b w-[35%]"},"File Name",-1)),e[27]||(e[27]=t("th",{class:"py-3 px-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider border-b w-32 hidden sm:table-cell"},"Account",-1)),e[28]||(e[28]=t("th",{class:"py-3 px-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider border-b hidden md:table-cell"},"Location",-1)),e[29]||(e[29]=t("th",{class:"py-3 px-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider border-b w-24 hidden lg:table-cell"},"Size",-1)),e[30]||(e[30]=t("th",{class:"py-3 px-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider border-b w-32 hidden xl:table-cell"},"Modified",-1)),e[31]||(e[31]=t("th",{class:"py-3 px-4 text-right text-xs font-semibold text-muted-foreground uppercase tracking-wider border-b w-24"},"Actions",-1))])]),t("tbody",ft,[(a(!0),d(X,null,ee(o(F),l=>(a(),d("tr",{key:l.id,class:S(["group hover:bg-[#F7F9FA] dark:hover:bg-muted/20 transition-colors",{"bg-blue-50 dark:bg-blue-500/10":o(c).has(l.id)}])},[t("td",gt,[t("input",{type:"checkbox",checked:o(c).has(l.id),onChange:u=>ge(l.id),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"},null,40,bt)]),t("td",vt,[t("div",wt,[t("div",yt,[r(n,{name:j(l.extension),class:S(["h-8 w-8",R(l.extension)])},null,8,["name","class"])]),t("div",kt,[t("p",{onClick:u=>ce(l),class:"font-medium text-sm text-[#1E1919] dark:text-foreground truncate cursor-pointer hover:text-[#0061FE] transition-colors",title:l.name},i(l.name),9,_t),t("div",Ct,[t("span",Ft,i(E(l.size)),1)])])])]),t("td",St,[t("span",{class:"inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium whitespace-nowrap",style:pe({backgroundColor:Q(l.accountId)+"15",color:Q(l.accountId)})},[t("span",{class:"w-1.5 h-1.5 rounded-full shrink-0",style:pe({backgroundColor:Q(l.accountId)})},null,4),t("span",zt,i(l.accountName),1)],4)]),t("td",Dt,[t("div",Et,[r(n,{name:"lucide:folder",class:"h-3 w-3 opacity-50 shrink-0"}),t("span",{class:"truncate",title:l.path},i(we(l.path)),9,jt)])]),t("td",It,i(E(l.size)),1),t("td",$t,i(Fe(l.modified)),1),t("td",Tt,[t("div",At,[t("button",{onClick:u=>ne(l),title:"Download",class:"h-8 w-8 flex items-center justify-center rounded hover:bg-white hover:text-[#0061FE] hover:shadow-sm transition-all text-muted-foreground"},[r(n,{name:"lucide:download",class:"h-4 w-4"})],8,Mt),t("button",{onClick:u=>ce(l),title:"Preview",class:"h-8 w-8 flex items-center justify-center rounded hover:bg-purple-50 hover:text-purple-600 hover:shadow-sm transition-all text-muted-foreground"},[r(n,{name:"lucide:eye",class:"h-4 w-4"})],8,Bt),t("button",{onClick:u=>ie(l),title:"Share",class:"h-8 w-8 flex items-center justify-center rounded hover:bg-[#0061FE] hover:text-white hover:shadow-sm transition-all text-muted-foreground"},[r(n,{name:"lucide:share-2",class:"h-4 w-4"})],8,Ut),t("button",{onClick:u=>Se(l),title:"Delete",class:"h-8 w-8 flex items-center justify-center rounded hover:bg-red-50 hover:text-red-600 hover:shadow-sm transition-all text-muted-foreground"},[r(n,{name:"lucide:trash-2",class:"h-4 w-4"})],8,Lt)])])],2))),128))])])])),o(K)>1?(a(),d("div",Nt,[t("div",Pt,[t("button",{onClick:e[5]||(e[5]=l=>C.value--),disabled:o(C)===1,class:"h-8 w-8 flex items-center justify-center rounded-full hover:bg-background disabled:opacity-50 transition-all text-muted-foreground"},[r(n,{name:"lucide:chevron-left",class:"h-4 w-4"})],8,Rt),t("div",Vt," Page "+i(o(C))+" of "+i(o(K)),1),t("button",{onClick:e[6]||(e[6]=l=>C.value++),disabled:o(C)===o(K),class:"h-8 w-8 flex items-center justify-center rounded-full hover:bg-background disabled:opacity-50 transition-all text-muted-foreground"},[r(n,{name:"lucide:chevron-right",class:"h-4 w-4"})],8,Ot)])])):b("",!0)])]),(a(),x(O,{to:"body"},[o(h)?(a(),d("div",{key:0,class:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-[#1E1919]/60 backdrop-blur-[2px]",onClick:V(re,["self"])},[t("div",qt,[t("div",Gt,[e[32]||(e[32]=t("h3",{class:"font-semibold text-lg text-[#1E1919] dark:text-foreground"},"Share File",-1)),t("button",{onClick:re,class:"p-1 rounded-full hover:bg-muted text-muted-foreground transition-colors"},[r(n,{name:"lucide:x",class:"h-5 w-5"})])]),t("div",Yt,[t("div",Kt,[t("div",Qt,[r(n,{name:j(o(h).extension),class:S(["h-10 w-10",R(o(h).extension)])},null,8,["name","class"])]),t("div",Zt,[t("h4",Ht,i(o(h).name),1),t("div",Jt,[t("span",null,i(E(o(h).size)),1),e[33]||(e[33]=t("span",null,"•",-1)),t("span",Wt,i(o(h).accountName),1)])])]),o(y)?(a(),d("div",Xt,[t("div",es,[t("div",ts,[r(n,{name:"lucide:check-circle-2",class:"h-5 w-5 text-green-600"})]),t("div",null,[e[34]||(e[34]=t("p",{class:"text-sm font-medium text-green-800 dark:text-green-300"},"Link created",-1)),t("p",ss,"Expires: "+i(Ce(o(y).expiresAt)),1)])]),t("div",os,[e[35]||(e[35]=t("label",{class:"text-xs font-bold uppercase text-muted-foreground tracking-wider"},"Public Link",-1)),t("div",ls,[t("div",ns,[t("input",{type:"text",value:o(y).url,readonly:"",class:"w-full h-11 pl-3 pr-10 bg-muted/30 border rounded-md text-sm font-mono text-foreground focus:ring-2 focus:ring-blue-500/20 outline-none transition-all"},null,8,as)]),t("button",{onClick:_e,class:"h-11 px-6 rounded-md bg-[#0061FE] hover:bg-[#0057E5] text-white font-medium text-sm transition-colors flex items-center gap-2"},[o(M)?(a(),x(n,{key:0,name:"lucide:check",class:"h-4 w-4"})):(a(),x(n,{key:1,name:"lucide:copy",class:"h-4 w-4"})),$(" "+i(o(M)?"Copied":"Copy"),1)])])])])):(a(),d("div",is,[t("div",null,[e[36]||(e[36]=t("label",{class:"text-sm font-medium text-foreground mb-3 block"},"Link settings",-1)),t("div",rs,[(a(),d(X,null,ee(ye,l=>t("button",{key:l.label,onClick:u=>{B.value=l.days,ae.value=l.unit},class:S(["px-3 py-2.5 rounded-lg text-sm font-medium transition-all border text-left flex items-center justify-between",o(B)===l.days?"bg-blue-50 border-blue-200 text-blue-700":"bg-card hover:bg-muted border-input text-muted-foreground"])},[$(i(l.label)+" ",1),o(B)===l.days?(a(),x(n,{key:0,name:"lucide:check",class:"h-4 w-4"})):b("",!0)],10,ds)),64))])]),t("button",{onClick:ke,disabled:o(P),class:"w-full h-12 rounded-lg bg-[#0061FE] hover:bg-[#0057E5] text-white font-semibold text-base shadow-sm transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed mt-2"},[o(P)?(a(),x(n,{key:0,name:"lucide:loader-2",class:"h-5 w-5 animate-spin"})):(a(),d("span",us,"Generate Link"))],8,cs)]))])])])):b("",!0)])),(a(),x(O,{to:"body"},[o(f)?(a(),d("div",{key:0,class:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-[#1E1919]/60 backdrop-blur-[2px]",onClick:e[8]||(e[8]=V(l=>f.value=null,["self"]))},[t("div",ms,[t("div",ps,[t("div",xs,[r(n,{name:"lucide:trash-2",class:"h-5 w-5 text-red-600"})]),e[37]||(e[37]=t("h3",{class:"font-semibold text-lg text-[#1E1919] dark:text-foreground"},"Delete File",-1))]),t("div",hs,[e[39]||(e[39]=t("p",{class:"text-muted-foreground mb-2"}," Are you sure you want to delete this file? ",-1)),t("div",fs,[r(n,{name:j(o(f).extension),class:S(["h-8 w-8",R(o(f).extension)])},null,8,["name","class"]),t("div",gs,[t("p",bs,i(o(f).name),1),t("p",vs,i(E(o(f).size))+" • "+i(o(f).accountName),1)])]),e[40]||(e[40]=t("p",{class:"text-xs text-muted-foreground mb-6"}," The file will be moved to trash and automatically deleted after 30 days. ",-1)),t("div",ws,[t("button",{onClick:e[7]||(e[7]=l=>f.value=null),class:"px-4 py-2 rounded-lg text-sm font-medium border border-input bg-background hover:bg-muted transition-colors"}," Cancel "),t("button",{onClick:ze,disabled:o(I),class:"px-4 py-2 rounded-lg text-sm font-medium bg-red-600 text-white hover:bg-red-700 transition-colors flex items-center gap-2 disabled:opacity-50"},[o(I)?(a(),x(n,{key:0,name:"lucide:loader-2",class:"h-4 w-4 animate-spin"})):(a(),x(n,{key:1,name:"lucide:trash-2",class:"h-4 w-4"})),e[38]||(e[38]=$(" Delete ",-1))],8,ys)])])])])):b("",!0)])),(a(),x(O,{to:"body"},[o(p)?(a(),d("div",{key:0,class:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/90",onClick:V(H,["self"])},[t("button",{onClick:H,class:"absolute top-4 right-4 z-10 h-10 w-10 flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 text-white transition-colors"},[r(n,{name:"lucide:x",class:"h-6 w-6"})]),t("div",ks,[r(n,{name:j(o(p).extension),class:"h-8 w-8 text-white shrink-0"},null,8,["name"]),t("div",_s,[t("p",Cs,i(o(p).name),1),t("p",Fs,i(E(o(p).size))+" • "+i(o(p).accountName),1)])]),t("div",Ss,[t("button",{onClick:e[9]||(e[9]=l=>ne(o(p))),class:"px-4 py-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-colors flex items-center gap-2"},[r(n,{name:"lucide:download",class:"h-4 w-4"}),e[41]||(e[41]=$(" Download ",-1))]),t("button",{onClick:e[10]||(e[10]=l=>{ie(o(p)),H()}),class:"px-4 py-2 rounded-lg bg-[#0061FE] hover:bg-[#0057E5] text-white transition-colors flex items-center gap-2"},[r(n,{name:"lucide:share-2",class:"h-4 w-4"}),e[42]||(e[42]=$(" Share ",-1))])]),t("div",zs,[o(Z)?(a(),d("div",Ds,[r(n,{name:"lucide:loader-2",class:"h-12 w-12 animate-spin"}),e[43]||(e[43]=t("p",null,"Loading preview...",-1))])):o(g)&&De(o(p).extension)?(a(),d("img",{key:1,src:o(g),alt:o(p).name,class:"max-w-full max-h-[80vh] object-contain rounded-lg shadow-2xl"},null,8,Es)):o(g)&&Ee(o(p).extension)?(a(),d("video",{key:2,src:o(g),controls:"",autoplay:"",class:"max-w-full max-h-[80vh] rounded-lg shadow-2xl"},null,8,js)):o(g)&&je(o(p).extension)?(a(),d("div",Is,[r(n,{name:j(o(p).extension),class:"h-24 w-24 mx-auto mb-4 text-indigo-500"},null,8,["name"]),t("p",$s,i(o(p).name),1),t("audio",{src:o(g),controls:"",autoplay:"",class:"w-full max-w-md"},null,8,Ts)])):o(g)?(a(),d("div",As,[r(n,{name:j(o(p).extension),class:S(["h-24 w-24 mx-auto mb-4",R(o(p).extension)])},null,8,["name","class"]),t("p",Ms,i(o(p).name),1),t("p",Bs,i(E(o(p).size)),1),e[44]||(e[44]=t("p",{class:"text-sm text-muted-foreground mb-4"},"Preview not available for this file type",-1)),t("button",{onClick:e[11]||(e[11]=l=>o(g)&&("navigateTo"in s?s.navigateTo:o(Ne))(o(g),{external:!0,open:{target:"_blank"}})),class:"px-6 py-2 rounded-lg bg-[#0061FE] hover:bg-[#0057E5] text-white transition-colors"}," Open in New Tab ")])):b("",!0)])])):b("",!0)])),(a(),x(O,{to:"body"},[o(L)?(a(),d("div",{key:0,class:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-[#1E1919]/60 backdrop-blur-[2px]",onClick:e[13]||(e[13]=V(l=>L.value=!1,["self"]))},[t("div",Us,[t("div",Ls,[t("div",Ns,[r(n,{name:"lucide:trash-2",class:"h-6 w-6"})]),t("div",null,[t("h3",Ps,"Delete "+i(o(c).size)+" Files?",1),e[45]||(e[45]=t("p",{class:"text-sm text-muted-foreground mt-2 px-4"}," This will move selected files to Trash. You can restore them within 30 days. ",-1))]),t("div",Rs,[t("button",{onClick:e[12]||(e[12]=l=>L.value=!1),class:"flex-1 h-10 rounded-lg border hover:bg-muted transition-colors text-sm font-medium"}," Cancel "),t("button",{onClick:ue,disabled:o(A),class:"flex-1 h-10 rounded-lg bg-red-600 hover:bg-red-700 text-white transition-colors text-sm font-medium flex items-center justify-center gap-2 disabled:opacity-70"},[o(A)?(a(),x(n,{key:0,name:"lucide:loader-2",class:"h-4 w-4 animate-spin"})):b("",!0),$(" "+i(o(A)?"Deleting...":"Move to Trash"),1)],8,Vs)])])])])):b("",!0)]))])}}});export{Ys as default};
